import{c as z,r as P,m as y,f as C,g as N,h as w,u as $,i as O,j as e,S as A,k as M,T as k,l as T,D as E,d as S,n as I,o as B}from"./index-DduWlyHt.js";import{S as H,H as F,P as V,a as L}from"./Badge-BwjyIJz_.js";import{d as U,T as G}from"./differenceInDays-YHmmidFu.js";import{p as v}from"./parseISO-BYvTlcex.js";import{f as p,p as g}from"./pt-BR-Cb6bWWUC.js";import{G as q}from"./graduation-cap-Dw2fv_-f.js";import{T as W}from"./trending-up-CHMA6jmg.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=z("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function _(){return P.useMemo(()=>{const r=y.filter(s=>s.status==="CONFIRMADO").length,d=y.filter(s=>s.status!=="PENDENTE").length,a=Math.round(r/(d||1)*100),n=C.filter(s=>!s.read).length,o=C.filter(s=>s.isLegallyRelevant).length,i=N.length,c=N.filter(s=>s.severity==="CRITICAL").length,x=w.filter(s=>s.status==="ATRASADO").length,m=w.filter(s=>s.status==="PENDENTE").length,j=y.filter(s=>s.status==="PENDENTE"||s.status==="CONFIRMADO").sort((s,t)=>new Date(s.startAt).getTime()-new Date(t.startAt).getTime())[0]??null,b=[...N].sort((s,t)=>new Date(t.reportedAt).getTime()-new Date(s.reportedAt).getTime()).slice(0,3),u=[...w].sort((s,t)=>new Date(t.dueDate).getTime()-new Date(s.dueDate).getTime()).slice(0,3);return{visitCompliance:a,confirmedVisits:r,unreadMessages:n,legalMessages:o,openIncidents:i,criticalIncidents:c,overduePayments:x,pendingPayments:m,nextVisit:j,recentIncidents:b,recentPayments:u}},[])}function J({pct:r}){const a=2*Math.PI*36,n=r/100*a;return e.jsxs("div",{className:"relative flex items-center justify-center",style:{width:88,height:88},"aria-hidden":"true",children:[e.jsxs("svg",{width:"88",height:"88",viewBox:"0 0 88 88",style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:"44",cy:"44",r:36,fill:"none",stroke:"rgba(255,255,255,0.2)",strokeWidth:"7"}),e.jsx("circle",{cx:"44",cy:"44",r:36,fill:"none",stroke:"#fff",strokeWidth:"7",strokeDasharray:`${n} ${a}`,strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute flex flex-col items-center",children:[e.jsxs("span",{className:"text-xl font-extrabold text-white leading-none",children:[r,"%"]}),e.jsx("span",{className:"text-xs text-white/70 font-medium mt-0.5",children:"visitas"})]})]})}function f({label:r,value:d,sub:a,icon:n,accent:o,accentBg:i,trend:c,progress:x}){return e.jsxs("div",{className:"card p-4 flex flex-col gap-3 relative overflow-hidden",style:{borderTop:`3px solid ${o}`},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:i,color:o},"aria-hidden":"true",children:n}),c&&e.jsxs("div",{className:"flex items-center gap-1 text-xs font-semibold px-2 py-0.5 rounded-full",style:{background:c.up?"rgba(22,163,74,0.1)":"rgba(220,38,38,0.1)",color:c.up?"var(--color-confirmado)":"var(--color-cancelado)"},children:[c.up?e.jsx(W,{size:11,"aria-hidden":"true"}):e.jsx(G,{size:11,"aria-hidden":"true"}),c.text]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-extrabold leading-none",style:{color:o},children:d}),e.jsx("p",{className:"text-label mt-1",style:{color:"var(--color-text-tertiary)"},children:r}),e.jsx("p",{className:"text-xs mt-0.5 font-medium",style:{color:"var(--color-text-tertiary)"},children:a})]}),x!==void 0&&e.jsx("div",{className:"h-1.5 rounded-full overflow-hidden",style:{background:"var(--color-border)"},children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${x}%`,background:o}})})]})}function re(){var u;const{user:r}=$(),{toast:d}=O(),{visitCompliance:a,unreadMessages:n,openIncidents:o,nextVisit:i,recentIncidents:c,recentPayments:x}=_(),m=i?Math.max(0,U(v(i.startAt),new Date)):null,j=y.slice(0,14),b=(r==null?void 0:r.role)==="GUARDIAN_1"?"ResponsÃ¡vel 1":"ResponsÃ¡vel 2";return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-5",children:[e.jsxs("div",{className:"rounded-2xl p-6 flex items-center justify-between gap-4 flex-wrap overflow-hidden relative",style:{background:"var(--foursys-gradient)",boxShadow:"0 8px 32px rgba(124,58,237,0.3)",minHeight:140},role:"banner",children:[e.jsx("div",{"aria-hidden":"true",style:{position:"absolute",right:-40,top:-40,width:200,height:200,borderRadius:"50%",background:"rgba(255,255,255,0.07)",pointerEvents:"none"}}),e.jsx("div",{"aria-hidden":"true",style:{position:"absolute",right:60,bottom:-60,width:160,height:160,borderRadius:"50%",background:"rgba(255,255,255,0.05)",pointerEvents:"none"}}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full mb-2",style:{background:"rgba(255,255,255,0.15)",backdropFilter:"blur(4px)"},children:[e.jsx(A,{size:12,color:"#fff","aria-hidden":"true"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:b})]}),e.jsxs("h2",{className:"text-2xl font-extrabold text-white leading-tight",children:["OlÃ¡, ",(u=r==null?void 0:r.fullName)==null?void 0:u.split(" ")[0]," ðŸ‘‹"]}),e.jsx("p",{className:"text-sm mt-1",style:{color:"rgba(255,255,255,0.75)"},children:p(new Date,"EEEE, dd 'de' MMMM 'de' yyyy",{locale:g})}),e.jsx("div",{className:"flex items-center gap-4 mt-4 flex-wrap",children:[{icon:e.jsx(R,{size:13,"aria-hidden":"true"}),text:`${a}% visitas cumpridas`},{icon:e.jsx(M,{size:13,"aria-hidden":"true"}),text:`${n} msg nÃ£o lida(s)`},{icon:e.jsx(k,{size:13,"aria-hidden":"true"}),text:`${o} ocorrÃªncia(s) abertas`}].map(s=>e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium",style:{color:"rgba(255,255,255,0.85)"},children:[s.icon,s.text]},s.text))})]}),e.jsx("div",{style:{position:"relative",zIndex:1},"aria-label":`Cumprimento de visitas: ${a}%`,children:e.jsx(J,{pct:a})})]}),e.jsx("section",{"aria-label":"MÃ©tricas principais",children:e.jsxs("div",{className:"grid grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsx(f,{label:"Cumprimento de visitas",value:`${a}%`,sub:"Este mÃªs",icon:e.jsx(T,{size:20}),accent:"var(--color-primary)",accentBg:"rgba(29,78,216,0.08)",trend:{up:!0,text:"+5%"},progress:a}),e.jsx(f,{label:"Mensagens nÃ£o lidas",value:n,sub:"Aguardando resposta",icon:e.jsx(M,{size:20}),accent:"var(--color-confirmado)",accentBg:"rgba(22,163,74,0.08)"}),e.jsx(f,{label:"OcorrÃªncias abertas",value:o,sub:"Requerem atenÃ§Ã£o",icon:e.jsx(k,{size:20}),accent:"var(--color-pendente)",accentBg:"rgba(217,119,6,0.08)",trend:{up:!1,text:"âˆ’1 resolvida"}}),e.jsx(f,{label:"PensÃ£o alimentÃ­cia",value:"R$ 1.200",sub:"Venc. 05/03 Â· Em dia",icon:e.jsx(E,{size:20}),accent:"var(--color-confirmado)",accentBg:"rgba(22,163,74,0.08)",trend:{up:!0,text:"Em dia"}})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-5",children:[e.jsxs("section",{className:"lg:col-span-3 card p-5","aria-label":"PrÃ³xima visita",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-h4",style:{color:"var(--color-text-primary)"},children:"PrÃ³xima visita"}),e.jsxs("button",{className:"text-xs font-medium flex items-center gap-1",style:{color:"var(--color-primary)"},children:["Ver calendÃ¡rio ",e.jsx(S,{size:14,"aria-hidden":"true"})]})]}),i?e.jsxs("div",{className:"rounded-xl p-4 mb-4 relative overflow-hidden",style:{background:"linear-gradient(135deg, var(--color-guardian-a-bg) 0%, rgba(255,255,255,0) 100%)",border:"1px solid var(--color-guardian-a-border)"},children:[m!==null&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold mb-3",style:{background:m===0?"var(--color-confirmado)":"var(--color-guardian-a)",color:"#fff"},children:[e.jsx(I,{size:11,"aria-hidden":"true"}),m===0?"Hoje!":`Em ${m} dia(s)`]}),e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-base",style:{color:"var(--color-text-primary)"},children:i.title}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[e.jsx(I,{size:13,style:{color:"var(--color-text-tertiary)"},"aria-hidden":"true"}),e.jsx("time",{dateTime:i.startAt,className:"text-sm",style:{color:"var(--color-text-secondary)"},children:p(v(i.startAt),"dd/MM 'Ã s' HH:mm",{locale:g})})]})]}),e.jsx(H,{status:i.status})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{className:"btn-gradient flex-1",onClick:()=>d("Check-in registrado com sucesso!","success"),children:"Check-in"}),e.jsx("button",{className:"btn-secondary",children:"Detalhes"})]})]}):e.jsxs("div",{className:"rounded-xl p-6 text-center mb-4",style:{background:"var(--color-surface-alt)",border:"1px dashed var(--color-border-dark)"},children:[e.jsx(T,{size:28,className:"mx-auto mb-2",style:{color:"var(--color-text-tertiary)"},"aria-hidden":"true"}),e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--color-text-tertiary)"},children:"Nenhuma visita agendada"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-label mb-2",style:{color:"var(--color-text-tertiary)"},children:"HistÃ³rico do mÃªs"}),e.jsx("div",{className:"grid gap-1.5",style:{gridTemplateColumns:"repeat(7, 1fr)"},children:j.map((s,t)=>{const l=s.status,h=l==="CONFIRMADO"?"var(--color-confirmado)":l==="FALTA"?"var(--color-cancelado)":l==="ATRASO"?"var(--color-atraso)":l==="CANCELADO"?"var(--color-cancelado)":"var(--color-border)";return e.jsx("div",{className:"rounded-lg flex items-center justify-center text-white",style:{aspectRatio:"1",background:h,fontSize:11,fontWeight:700},title:`${s.title} â€” ${l}`,"aria-label":`Visita ${t+1}: ${l}`,children:l==="CONFIRMADO"?e.jsx(R,{size:14,"aria-hidden":"true"}):e.jsx("span",{style:{color:l==="PENDENTE"?"var(--color-text-tertiary)":"#fff"},children:t+1})},s.id)})}),e.jsx("div",{className:"flex gap-4 mt-2.5 flex-wrap",children:[{color:"var(--color-confirmado)",label:"Cumprida"},{color:"var(--color-cancelado)",label:"Falta"},{color:"var(--color-atraso)",label:"Atraso"},{color:"var(--color-border)",label:"Pendente"}].map(({color:s,label:t})=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{background:s},"aria-hidden":"true"}),e.jsx("span",{className:"text-caption",children:t})]},t))})]})]}),e.jsxs("section",{className:"lg:col-span-2 card p-5 flex flex-col","aria-label":"Filhos cadastrados",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-h4",style:{color:"var(--color-text-primary)"},children:"Filhos"}),e.jsxs("button",{className:"text-xs font-medium flex items-center gap-1",style:{color:"var(--color-primary)"},children:["Ver todos ",e.jsx(K,{size:13,"aria-hidden":"true"})]})]}),e.jsx("div",{className:"space-y-3 flex-1",children:B.map((s,t)=>{const l=Math.floor((Date.now()-new Date(s.birthDate).getTime())/315576e5),h=t===0?80:60,D=h>=75?"var(--color-confirmado)":"var(--color-pendente)";return e.jsxs("div",{className:"rounded-xl p-3 cursor-pointer card-hover",style:{background:"var(--color-surface-alt)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center justify-center font-bold text-white text-base",style:{width:44,height:44,borderRadius:"50%",background:t===0?"var(--foursys-gradient)":"linear-gradient(135deg, #DB2777 0%, #9A1BFF 100%)",boxShadow:"0 3px 8px rgba(124,58,237,0.25)"},"aria-hidden":"true",children:s.fullName.charAt(0)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-bold truncate",style:{color:"var(--color-text-primary)"},children:[s.fullName.split(" ")[0]," ",s.fullName.split(" ").slice(-1)[0]]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("span",{className:"text-xs font-medium px-1.5 py-0.5 rounded",style:{background:"rgba(29,78,216,0.08)",color:"var(--color-primary)"},children:[l," anos"]}),e.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(q,{size:11,style:{color:"var(--color-text-tertiary)",flexShrink:0},"aria-hidden":"true"}),e.jsx("span",{className:"text-xs truncate",style:{color:"var(--color-text-tertiary)"},children:s.schoolName.split(" ").slice(0,2).join(" ")})]})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:"Cumprimento"}),e.jsxs("span",{className:"text-xs font-bold",style:{color:D},children:[h,"%"]})]}),e.jsx("div",{className:"h-1.5 rounded-full overflow-hidden",style:{background:"var(--color-border)"},children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${h}%`,background:D}})})]})]},s.id)})}),e.jsxs("button",{className:"btn-primary w-full mt-4 flex items-center justify-center gap-2 text-sm",children:[e.jsx(A,{size:14,"aria-hidden":"true"}),"Registrar ocorrÃªncia"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[e.jsxs("section",{className:"card p-5","aria-label":"Pagamentos de pensÃ£o alimentÃ­cia",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-h4",style:{color:"var(--color-text-primary)"},children:"PensÃ£o alimentÃ­cia"}),e.jsx("button",{className:"text-xs font-medium",style:{color:"var(--color-primary)"},children:"Ver extrato â†’"})]}),e.jsx("div",{className:"space-y-1",children:x.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg px-3 py-2.5",style:{background:t%2===0?"var(--color-surface-alt)":"transparent"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"rgba(29,78,216,0.07)",color:"var(--color-primary)"},"aria-hidden":"true",children:e.jsx(E,{size:16})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold",style:{color:"var(--color-text-primary)"},children:["R$ ",s.amount.toFixed(2).replace(".",",")]}),e.jsx("time",{dateTime:s.paymentDate??s.dueDate,className:"text-timestamp",children:p(v(s.paymentDate??s.dueDate),"MMM/yyyy",{locale:g}).toUpperCase()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.receiptUrl&&e.jsx(F,{hash:`sha256:${s.id.slice(-8)}abc`}),e.jsx(V,{status:s.status})]})]},s.id))})]}),e.jsxs("section",{className:"card p-5","aria-label":"OcorrÃªncias recentes",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-h4",style:{color:"var(--color-text-primary)"},children:"OcorrÃªncias recentes"}),e.jsx("button",{className:"text-xs font-medium",style:{color:"var(--color-primary)"},children:"Ver todas â†’"})]}),e.jsx("div",{className:"space-y-2.5",children:c.map(s=>{const t=s.severity==="CRITICAL"?"var(--color-severity-critical)":s.severity==="HIGH"?"var(--color-severity-high)":s.severity==="MEDIUM"?"var(--color-severity-medium)":"var(--color-severity-low)",l=s.severity==="CRITICAL"?"var(--color-severity-critical-bg)":s.severity==="HIGH"?"var(--color-severity-high-bg)":s.severity==="MEDIUM"?"var(--color-severity-medium-bg)":"var(--color-severity-low-bg)";return e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl cursor-pointer card-hover",style:{background:"var(--color-surface-alt)",border:"1px solid var(--color-border)",borderLeft:`4px solid ${t}`},children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:l,color:t},"aria-hidden":"true",children:e.jsx(k,{size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:"text-sm font-semibold truncate",style:{color:"var(--color-text-primary)"},children:s.title}),e.jsx(L,{severity:s.severity})]}),e.jsx("time",{dateTime:s.reportedAt,className:"text-timestamp mt-0.5 block",children:p(v(s.reportedAt),"dd/MM 'Ã s' HH:mm",{locale:g})})]})]},s.id)})})]})]})]})}export{re as default};
