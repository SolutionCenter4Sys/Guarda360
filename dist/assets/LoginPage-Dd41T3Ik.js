import{r as o,u as H,a as Q,j as e,S as U,M as X,L as E,C as Y,b as Z}from"./index-DduWlyHt.js";import{C as y}from"./circle-alert-D4zJIj6G.js";import{R as P}from"./rotate-ccw-UqZB-OuP.js";import{S as z}from"./smartphone-C4TuRfbh.js";import{E as D}from"./eye-off-Cq4GUKh6.js";import{E as R}from"./eye-CONcyIQe.js";function oe(){const[p,d]=o.useState("credentials"),[m,q]=o.useState(""),[u,L]=o.useState(""),[v,M]=o.useState(!1),[j,V]=o.useState(!1),[$,T]=o.useState(!1),[l,c]=o.useState(""),[s,i]=o.useState(!1),[x,g]=o.useState(["","","","","",""]),[h,O]=o.useState(""),[f,A]=o.useState(["","","","","",""]),[b,B]=o.useState(""),[S,G]=o.useState(""),N=o.useRef([]),w=o.useRef([]),{login:k}=H(),C=Q(),I=async a=>{a.preventDefault(),c(""),i(!0);try{m.toLowerCase().includes("2fa")||u==="2fa"?(await new Promise(r=>setTimeout(r,600)),d("2fa")):(await k(m,u),C("/dashboard",{replace:!0}))}catch{c("E-mail ou senha inv√°lidos. Tente novamente.")}finally{i(!1)}},K=(a,r)=>{var n;if(!/^\d?$/.test(r))return;const t=[...x];t[a]=r,g(t),r&&a<5&&((n=w.current[a+1])==null||n.focus())},W=(a,r)=>{var t;r.key==="Backspace"&&!x[a]&&a>0&&((t=w.current[a-1])==null||t.focus())},J=async a=>{if(a.preventDefault(),c(""),x.join("").length<6){c("Digite o c√≥digo completo de 6 d√≠gitos.");return}i(!0),await new Promise(t=>setTimeout(t,800)),await k(m,u).catch(()=>{}),C("/dashboard",{replace:!0}),i(!1)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"var(--color-bg)"},children:e.jsxs("div",{className:"w-full max-w-sm fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl mb-4",style:{background:"var(--foursys-gradient)",boxShadow:"0 8px 24px rgba(124,58,237,0.35)"},"aria-hidden":"true",children:e.jsx(U,{size:32,className:"text-white"})}),e.jsxs("h1",{className:"text-h3",style:{color:"var(--color-text-primary)"},children:["Guarda",e.jsx("span",{style:{background:"var(--foursys-gradient)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"360¬∞"})]}),e.jsx("p",{className:"text-caption mt-1",children:"Guarda Compartilhada ¬∑ Plataforma Jur√≠dica"})]}),e.jsxs("div",{className:"card p-6",style:{boxShadow:"var(--shadow-soft)",borderTop:"3px solid transparent",borderImage:"var(--foursys-gradient) 1"},children:[p==="forgot-email"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl mx-auto mb-3 flex items-center justify-center",style:{background:"var(--foursys-gradient)"},"aria-hidden":"true",children:e.jsx(X,{size:26,className:"text-white"})}),e.jsx("h2",{className:"text-h4",style:{color:"var(--color-text-primary)"},children:"Recuperar senha"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--color-text-tertiary)"},children:"Informe seu e-mail cadastrado"})]}),l&&e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-md text-sm fade-in",style:{background:"var(--color-cancelado-bg)",border:"1px solid var(--color-cancelado-border)",color:"var(--color-cancelado)"},role:"alert",children:[e.jsx(y,{size:16,className:"flex-shrink-0"}),l]}),e.jsxs("form",{onSubmit:async a=>{a.preventDefault(),c(""),i(!0),await new Promise(r=>setTimeout(r,800)),i(!1),d("forgot-code")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"forgot-email",className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"E-mail *"}),e.jsx("input",{id:"forgot-email",type:"email",className:"input-field",value:h,onChange:a=>O(a.target.value),placeholder:"seu@email.com",required:!0,autoFocus:!0})]}),e.jsx("button",{type:"submit",className:"btn-gradient w-full flex items-center justify-center gap-2",disabled:s||!h,style:{opacity:!h||s?.55:1},"aria-busy":s,children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),"Enviando‚Ä¶"]}):"Enviar c√≥digo"})]}),e.jsxs("button",{onClick:()=>{d("credentials"),c("")},className:"w-full text-sm flex items-center justify-center gap-1.5",style:{color:"var(--color-text-tertiary)"},children:[e.jsx(P,{size:13}),"Voltar ao login"]})]}),p==="forgot-code"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl mx-auto mb-3 flex items-center justify-center",style:{background:"var(--foursys-gradient)"},"aria-hidden":"true",children:e.jsx(z,{size:26,className:"text-white"})}),e.jsx("h2",{className:"text-h4",style:{color:"var(--color-text-primary)"},children:"C√≥digo de verifica√ß√£o"}),e.jsxs("p",{className:"text-sm mt-1",style:{color:"var(--color-text-tertiary)"},children:["Enviamos um c√≥digo para ",e.jsx("strong",{children:h})]})]}),e.jsxs("form",{onSubmit:async a=>{a.preventDefault(),i(!0),await new Promise(r=>setTimeout(r,700)),i(!1),d("forgot-reset")},className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-label block text-center mb-3",style:{color:"var(--color-text-secondary)"},children:"C√≥digo de 6 d√≠gitos"}),e.jsx("div",{className:"flex gap-2 justify-center",children:f.map((a,r)=>e.jsx("input",{ref:t=>{N.current[r]=t},type:"text",inputMode:"numeric",maxLength:1,value:a,onChange:t=>{var F;if(!/^\d?$/.test(t.target.value))return;const n=[...f];n[r]=t.target.value,A(n),t.target.value&&r<5&&((F=N.current[r+1])==null||F.focus())},onKeyDown:t=>{var n;t.key==="Backspace"&&!a&&r>0&&((n=N.current[r-1])==null||n.focus())},className:"w-11 h-12 text-center text-xl font-bold rounded-xl border-2 transition-all outline-none",style:{border:`2px solid ${a?"var(--color-primary)":"var(--color-border-dark)"}`,background:"var(--color-surface-alt)",color:"var(--color-text-primary)"},"aria-label":`D√≠gito ${r+1}`,autoFocus:r===0},r))})]}),e.jsx("button",{type:"submit",className:"btn-gradient w-full",disabled:s||f.join("").length<6,style:{opacity:f.join("").length<6||s?.55:1},"aria-busy":s,children:s?"Verificando‚Ä¶":"Verificar c√≥digo"})]}),e.jsx("p",{className:"text-xs text-center",style:{color:"var(--color-text-tertiary)"},children:"üí° Demo: qualquer c√≥digo funciona"})]}),p==="forgot-reset"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl mx-auto mb-3 flex items-center justify-center",style:{background:"linear-gradient(135deg, #059669, #0ea5e9)"},"aria-hidden":"true",children:e.jsx(E,{size:26,className:"text-white"})}),e.jsx("h2",{className:"text-h4",style:{color:"var(--color-text-primary)"},children:"Nova senha"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--color-text-tertiary)"},children:"Crie uma senha segura de pelo menos 8 caracteres"})]}),l&&e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-md text-sm fade-in",style:{background:"var(--color-cancelado-bg)",border:"1px solid var(--color-cancelado-border)",color:"var(--color-cancelado)"},role:"alert",children:[e.jsx(y,{size:16,className:"flex-shrink-0"}),l]}),e.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),c(""),b!==S){c("As senhas n√£o coincidem.");return}if(b.length<8){c("M√≠nimo 8 caracteres.");return}i(!0),await new Promise(r=>setTimeout(r,800)),i(!1),await k(h,b).catch(()=>{}),C("/dashboard",{replace:!0})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-pwd",className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Nova senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"new-pwd",type:j?"text":"password",className:"input-field pr-10",value:b,onChange:a=>{B(a.target.value),c("")},placeholder:"M√≠nimo 8 caracteres",required:!0,autoFocus:!0}),e.jsx("button",{type:"button",onClick:()=>V(a=>!a),className:"absolute right-3 top-1/2 -translate-y-1/2",style:{color:"var(--color-text-disabled)"},"aria-label":j?"Ocultar":"Mostrar",children:j?e.jsx(D,{size:16}):e.jsx(R,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-new-pwd",className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Confirmar nova senha *"}),e.jsx("input",{id:"confirm-new-pwd",type:"password",className:`input-field ${l?"input-error":""}`,value:S,onChange:a=>{G(a.target.value),c("")},placeholder:"Repita a nova senha",required:!0})]}),e.jsx("button",{type:"submit",className:"btn-gradient w-full flex items-center justify-center gap-2",disabled:s,"aria-busy":s,children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),"Salvando‚Ä¶"]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{size:15}),"Salvar nova senha"]})})]})]}),p==="2fa"?e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl mx-auto mb-3 flex items-center justify-center",style:{background:"var(--foursys-gradient)"},"aria-hidden":"true",children:e.jsx(z,{size:28,className:"text-white"})}),e.jsx("h2",{className:"text-h4",style:{color:"var(--color-text-primary)"},children:"Verifica√ß√£o em 2 etapas"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--color-text-tertiary)"},children:"Insira o c√≥digo de 6 d√≠gitos do seu aplicativo autenticador"})]}),l&&e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-md text-sm fade-in",style:{background:"var(--color-cancelado-bg)",border:"1px solid var(--color-cancelado-border)",color:"var(--color-cancelado)"},role:"alert",children:[e.jsx(y,{size:16,className:"flex-shrink-0","aria-hidden":"true"}),l]}),e.jsxs("form",{onSubmit:J,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-label block text-center mb-3",style:{color:"var(--color-text-secondary)"},children:"C√≥digo de verifica√ß√£o"}),e.jsx("div",{className:"flex gap-2 justify-center",children:x.map((a,r)=>e.jsx("input",{ref:t=>{w.current[r]=t},type:"text",inputMode:"numeric",maxLength:1,value:a,onChange:t=>K(r,t.target.value),onKeyDown:t=>W(r,t),className:"w-11 h-12 text-center text-xl font-bold rounded-xl border-2 transition-all outline-none",style:{border:`2px solid ${a?"var(--color-primary)":"var(--color-border-dark)"}`,background:"var(--color-surface-alt)",color:"var(--color-text-primary)"},"aria-label":`D√≠gito ${r+1} do c√≥digo`,autoFocus:r===0},r))})]}),e.jsx("button",{type:"submit",className:"btn-gradient w-full flex items-center justify-center gap-2",disabled:s||x.join("").length<6,"aria-busy":s,style:s||x.join("").length<6?{opacity:.55,cursor:"not-allowed"}:{},children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full","aria-hidden":"true"}),"Verificando‚Ä¶"]}):"Verificar c√≥digo"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm",children:[e.jsxs("button",{type:"button",onClick:()=>{d("credentials"),g(["","","","","",""]),c("")},className:"flex items-center gap-1.5",style:{color:"var(--color-text-tertiary)"},children:[e.jsx(P,{size:13,"aria-hidden":"true"}),"Voltar ao login"]}),e.jsx("button",{type:"button",className:"font-semibold",style:{color:"var(--color-primary)"},onClick:()=>{g(["","","","","",""]),alert("Novo c√≥digo enviado! (simula√ß√£o)")},children:"Reenviar c√≥digo"})]}),e.jsx("div",{className:"p-3 rounded-xl text-center",style:{background:"var(--color-surface-alt)",border:"1px solid var(--color-border)"},children:e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:"üí° Demo: qualquer c√≥digo de 6 d√≠gitos funciona"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-h4 mb-5",style:{color:"var(--color-text-primary)"},children:"Entrar na conta"}),l&&e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-md text-sm mb-4 fade-in",style:{background:"var(--color-cancelado-bg)",border:"1px solid var(--color-cancelado-border)",color:"var(--color-cancelado)"},role:"alert","aria-live":"polite",children:[e.jsx(y,{size:16,className:"flex-shrink-0","aria-hidden":"true"}),l]}),e.jsxs("form",{onSubmit:I,className:"space-y-4",noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"E-mail"}),e.jsx("input",{id:"email",type:"email",value:m,onChange:a=>q(a.target.value),className:`input-field ${l?"input-error":""}`,placeholder:"seu@email.com",required:!0,autoComplete:"email",autoFocus:!0,"aria-describedby":l?"error-msg":void 0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:v?"text":"password",value:u,onChange:a=>L(a.target.value),className:`input-field pr-10 ${l?"input-error":""}`,placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",required:!0,autoComplete:"current-password","aria-describedby":l?"error-msg":void 0}),e.jsx("button",{type:"button",onClick:()=>M(a=>!a),className:"absolute right-3 top-1/2 -translate-y-1/2",style:{color:"var(--color-text-disabled)"},"aria-label":v?"Ocultar senha":"Mostrar senha",children:v?e.jsx(D,{size:16,"aria-hidden":"true"}):e.jsx(R,{size:16,"aria-hidden":"true"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$,onChange:a=>T(a.target.checked),className:"rounded","aria-label":"Manter-me conectado"}),e.jsx("span",{className:"text-body-sm",style:{color:"var(--color-text-secondary)"},children:"Lembrar-me"})]}),e.jsx("button",{type:"button",className:"text-body-sm font-medium",style:{color:"var(--color-primary)"},onClick:()=>{c(""),d("forgot-email")},children:"Esqueci a senha"})]}),e.jsx("button",{type:"submit",className:"btn-gradient w-full flex items-center justify-center gap-2",disabled:s||!m||!u,"aria-busy":s,style:s||!m||!u?{opacity:.5,cursor:"not-allowed"}:{},children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full","aria-hidden":"true"}),"Entrando‚Ä¶"]}):"Entrar na plataforma"})]}),e.jsxs("p",{className:"text-center text-body-sm mt-4",style:{color:"var(--color-text-tertiary)"},children:["N√£o tem conta?"," ",e.jsx(Z,{to:"/register",className:"font-semibold",style:{color:"var(--color-primary)"},children:"Criar conta"})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 rounded-lg text-sm fade-in",style:{background:"var(--color-primary-muted)",border:"1px solid var(--color-primary-border)"},children:[e.jsxs("p",{className:"font-semibold mb-1 flex items-center gap-1.5",style:{color:"var(--color-primary)"},children:[e.jsx(E,{size:13,"aria-hidden":"true"}),"Credenciais de demonstra√ß√£o"]}),e.jsxs("p",{className:"text-caption",children:[e.jsx("span",{style:{fontFamily:"var(--font-mono)"},children:"guardian1@guarda360.com"})," / ",e.jsx("span",{style:{fontFamily:"var(--font-mono)"},children:"password123"})]}),e.jsxs("p",{className:"text-caption mt-1",children:["Para testar 2FA: use senha ",e.jsx("span",{style:{fontFamily:"var(--font-mono)"},children:"2fa"})]})]}),e.jsx("p",{className:"text-center text-caption mt-4 px-4",children:"Plataforma com registro imut√°vel de dados jur√≠dicos. LGPD compliant."})]})})}export{oe as default};
