import{c as O,r as b,h as P,z as D,i as me,j as e,D as F,A as C,n as Q,B as _,l as xe,X as L,o as pe,C as V,T as ue}from"./index-DduWlyHt.js";import{F as H}from"./FileUpload-CJ1fZ0gc.js";import{D as be}from"./download-Cux2d8XB.js";import{C as I}from"./chart-no-axes-column-CRnerE2m.js";import{T as he}from"./trending-up-CHMA6jmg.js";import{U as fe}from"./upload-CazXprGT.js";import{P as ye}from"./plus-B51eporo.js";import{C as G}from"./circle-alert-D4zJIj6G.js";import{d as Z,T as J}from"./differenceInDays-YHmmidFu.js";import{s as K}from"./subMonths-bNZNUgqi.js";import{f as p,p as M}from"./pt-BR-Cb6bWWUC.js";import{p as ve}from"./parseISO-BYvTlcex.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=O("BellOff",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=O("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=O("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=O("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);function je(){return b.useMemo(()=>{const c=P.filter(s=>s.status==="PAGO").reduce((s,l)=>s+(l.amountPaid??0),0),h=P.filter(s=>s.status==="PENDENTE").reduce((s,l)=>s+l.amount,0),u=P.filter(s=>s.status==="ATRASADO").reduce((s,l)=>s+l.amount,0),r=D.reduce((s,l)=>s+l.amount,0),j=D.reduce((s,l)=>s+l.amount*(l.payer1Share/100),0),x=D.filter(s=>s.status==="PENDENTE").length,o=D.filter(s=>s.status==="CONTESTADO").length;return{totalPaid:c,totalPending:h,totalOverdue:u,totalExpenses:r,myExpenseShare:j,pendingExpenses:x,disputedExpenses:o,payments:P,expenses:D}},[])}const R={MEDICO:"üè• M√©dico",ESCOLAR:"üìö Escolar",ESPORTE:"‚öΩ Esporte",LAZER:"üé° Lazer",OUTROS:"üì¶ Outros"},Y={PAGO:{label:"Pago",badgeClass:"badge badge-confirmado",color:"var(--color-confirmado)"},PENDENTE:{label:"Pendente",badgeClass:"badge badge-pendente",color:"var(--color-pendente)"},ATRASADO:{label:"Atrasado",badgeClass:"badge badge-cancelado",color:"var(--color-cancelado)"},PARCIAL:{label:"Parcial",badgeClass:"badge badge-pendente",color:"var(--color-pendente)"}},Ne={PENDENTE:{label:"Pendente",tokenVar:"var(--color-pendente)",icon:e.jsx(Q,{size:14,"aria-hidden":"true"})},APROVADO:{label:"Aprovado",tokenVar:"var(--color-confirmado)",icon:e.jsx(V,{size:14,"aria-hidden":"true"})},CONTESTADO:{label:"Contestado",tokenVar:"var(--color-cancelado)",icon:e.jsx(ue,{size:14,"aria-hidden":"true"})},PAGO:{label:"Pago",tokenVar:"var(--color-confirmado)",icon:e.jsx(V,{size:14,"aria-hidden":"true"})}};function ke({months:c}){const h=Math.max(...c.map(r=>r.paid+r.pending+r.expenses),1),u=120;return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-end gap-1.5 overflow-x-auto pb-2",style:{height:u+30},"aria-label":"Gr√°fico financeiro 12 meses",children:c.map((r,j)=>{const x=Math.round(r.paid/h*u),o=Math.round(r.pending/h*u),s=Math.round(r.expenses/h*u),l=j===c.length-1;return e.jsxs("div",{className:"flex flex-col items-center gap-0.5 flex-1 min-w-[30px] group",title:`${r.label}: Pago R$${r.paid.toLocaleString("pt-BR")}`,children:[e.jsxs("div",{className:"flex flex-col-reverse items-center w-full",style:{height:u},children:[x>0&&e.jsx("div",{className:"w-full rounded-t transition-all",style:{height:x,background:l?"var(--foursys-gradient)":"var(--color-confirmado)",opacity:.85,borderRadius:"4px 4px 0 0"}}),o>0&&e.jsx("div",{className:"w-full",style:{height:o,background:"var(--color-pendente)",opacity:.7}}),s>0&&e.jsx("div",{className:"w-full",style:{height:s,background:"var(--color-primary)",opacity:.4}})]}),e.jsx("p",{className:"text-xs font-semibold",style:{color:l?"var(--color-primary)":"var(--color-text-tertiary)",fontSize:"10px"},children:r.label})]},r.label)})}),e.jsx("div",{className:"flex gap-3 mt-2 flex-wrap",children:[{color:"var(--color-confirmado)",label:"Pago"},{color:"var(--color-pendente)",label:"Pendente"},{color:"var(--color-primary)",label:"Despesas extras"}].map(r=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-sm",style:{background:r.color},"aria-hidden":"true"}),e.jsx("span",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:r.label})]},r.label))})]})}function we(c,h){const r=[["Tipo","Descri√ß√£o","Compet√™ncia","Vencimento","Valor","Status"],...c.map(s=>["Pens√£o",`Pens√£o aliment√≠cia ‚Äî ${s.month}`,s.month,s.dueDate,(s.amountPaid??s.amount).toFixed(2),s.status]),...h.map(s=>["Despesa",s.description,p(ve(s.createdAt),"yyyy-MM"),s.createdAt.slice(0,10),s.amount.toFixed(2),s.status])].map(s=>s.join(";")).join(`
`),j=new Blob([r],{type:"text/csv;charset=utf-8"}),x=URL.createObjectURL(j),o=document.createElement("a");o.href=x,o.download=`guarda360-financeiro-${p(new Date,"yyyyMM")}.csv`,o.click(),URL.revokeObjectURL(x)}function Fe(){const[c,h]=b.useState("resumo"),[u,r]=b.useState(!1),[j,x]=b.useState(!1),[o,s]=b.useState(null),[l,S]=b.useState(""),[k,ee]=b.useState(3),[y,ae]=b.useState(!0),{toast:A}=me(),{totalPaid:se,totalPending:te,totalExpenses:T,myExpenseShare:re,payments:N,expenses:f}=je(),oe=b.useMemo(()=>Array.from({length:12},(a,t)=>{const d=K(new Date,11-t),i=p(d,"yyyy-MM"),v=p(d,"MMM",{locale:M}),n=N.find(m=>m.month===i);return{label:v.charAt(0).toUpperCase()+v.slice(1),paid:(n==null?void 0:n.status)==="PAGO"?n.amountPaid??n.amount:0,pending:(n==null?void 0:n.status)==="PENDENTE"||(n==null?void 0:n.status)==="ATRASADO"?n.amount:0,expenses:f.filter(m=>m.createdAt.startsWith(i)&&m.status!=="CONTESTADO").reduce((m,E)=>m+E.amount*.5,0)}}),[N,f]),w=b.useMemo(()=>Array.from({length:12},(t,d)=>{const i=K(new Date,11-d),v=p(i,"yyyy-MM"),n=p(i,"MMMM yyyy",{locale:M}),m=N.find(de=>de.month===v);if(!m)return{key:v,label:n,status:"SEM_DADOS",amount:0,daysLate:0,fine:0,interest:0};const E=new Date(m.dueDate),U=m.paymentDate?new Date(m.paymentDate):null;let z="EM_ABERTO",g=0;U?(g=Math.max(0,Z(U,E)),z=g>0?"PAGO_ATRASO":"PAGO_PRAZO"):(g=Math.max(0,Z(new Date,E)),z=g>0?"EM_ABERTO":"PAGO_PRAZO");const $=m.amountPaid??m.amount,ie=g>0?+($*.02).toFixed(2):0,ne=g>0?+($*.01*Math.ceil(g/30)).toFixed(2):0;return{key:v,label:n,status:z,amount:$,daysLate:g,fine:ie,interest:ne}}),[N]),q=w.filter(a=>a.status==="EM_ABERTO").reduce((a,t)=>a+t.amount+t.fine+t.interest,0),le=w.reduce((a,t)=>a+t.fine+t.interest,0),ce=[{id:"resumo",label:"Resumo",icon:e.jsx(I,{size:15})},{id:"pensao",label:"Pens√£o",icon:e.jsx(F,{size:15})},{id:"despesas",label:"Despesas",icon:e.jsx(B,{size:15})},{id:"inadimplencia",label:"Inadimpl√™ncia",icon:e.jsx(J,{size:15})}];return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-5",children:[e.jsxs("div",{className:"rounded-2xl overflow-hidden",style:{background:"linear-gradient(135deg, #059669 0%, #0ea5e9 100%)",boxShadow:"0 6px 24px rgba(5,150,105,0.28)"},children:[e.jsxs("div",{className:"px-5 pt-4 pb-3 flex items-center justify-between flex-wrap gap-3",style:{borderBottom:"1px solid rgba(255,255,255,0.12)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255,255,255,0.2)"},"aria-hidden":"true",children:e.jsx(F,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-extrabold text-white leading-tight",children:"Gest√£o Financeira"}),e.jsx("p",{className:"text-xs",style:{color:"rgba(255,255,255,0.7)"},children:"Pens√£o aliment√≠cia e despesas extraordin√°rias"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>we(N,f),className:"flex items-center gap-1.5 px-3 py-2 rounded-full text-sm font-bold",style:{background:"rgba(255,255,255,0.15)",color:"#fff",border:"1.5px solid rgba(255,255,255,0.3)"},"aria-label":"Exportar relat√≥rio financeiro",children:[e.jsx(be,{size:14,"aria-hidden":"true"}),"Exportar relat√≥rio"]})})]}),e.jsx("div",{className:"grid grid-cols-4 gap-px px-5 py-4",children:[{label:"Pago (ano)",value:`R$ ${se.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,color:"rgba(255,255,255,0.9)"},{label:"Pendente",value:`R$ ${te.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,color:"#fde68a"},{label:"Despesas",value:`R$ ${T.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,color:"rgba(255,255,255,0.8)"},{label:"Em atraso",value:`R$ ${q.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,color:"#fca5a5"}].map(a=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-base font-extrabold leading-none",style:{color:a.color},children:a.value}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"rgba(255,255,255,0.55)"},children:a.label})]},a.label))})]}),e.jsx("div",{className:"flex gap-1 p-1 rounded-2xl",style:{background:"var(--color-surface-alt)",border:"1px solid var(--color-border)"},role:"tablist",children:ce.map(a=>e.jsxs("button",{role:"tab","aria-selected":c===a.id,onClick:()=>h(a.id),className:"flex-1 flex items-center justify-center gap-1.5 py-2 rounded-xl text-sm font-semibold transition-all",style:{background:c===a.id?"var(--color-primary)":"transparent",color:c===a.id?"#fff":"var(--color-text-secondary)",boxShadow:c===a.id?"0 2px 8px rgba(29,78,216,0.3)":"none"},children:[a.icon,e.jsx("span",{className:"hidden sm:inline",children:a.label})]},a.id))}),c==="resumo"&&e.jsxs("div",{className:"space-y-4",role:"tabpanel","aria-label":"Resumo financeiro",children:[e.jsxs("div",{className:"card p-5",style:{boxShadow:"var(--shadow-soft)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{size:18,style:{color:"var(--color-primary)"},"aria-hidden":"true"}),e.jsx("h3",{className:"text-base font-bold",style:{color:"var(--color-text-primary)"},children:"Movimenta√ß√£o ‚Äî √öltimos 12 meses"})]}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-semibold",style:{background:"var(--color-primary-muted)",color:"var(--color-primary)"},children:new Date().getFullYear()})]}),e.jsx(ke,{months:oe})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"card p-4 space-y-2",style:{boxShadow:"var(--shadow-soft)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",style:{color:"var(--color-text-tertiary)"},children:"Pens√£o ‚Äî Este m√™s"}),e.jsx(he,{size:14,style:{color:"var(--color-confirmado)"},"aria-hidden":"true"})]}),(()=>{const a=p(new Date,"yyyy-MM"),t=N.find(i=>i.month===a),d=t?Y[t.status]:null;return e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-extrabold",style:{color:"var(--color-text-primary)"},children:["R$ ",C.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:["Vence dia ",C.dueDay]}),d&&e.jsx("span",{className:d.badgeClass,children:d.label})]})]})})()]}),e.jsxs("div",{className:"card p-4 space-y-2",style:{boxShadow:"var(--shadow-soft)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",style:{color:"var(--color-text-tertiary)"},children:"Despesas Pendentes"}),e.jsx(Q,{size:14,style:{color:"var(--color-pendente)"},"aria-hidden":"true"})]}),e.jsx("p",{className:"text-2xl font-extrabold",style:{color:"var(--color-text-primary)"},children:f.filter(a=>a.status==="PENDENTE").length}),e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:f.filter(a=>a.status==="PENDENTE").length===0?"Nenhuma pendente":`R$ ${f.filter(a=>a.status==="PENDENTE").reduce((a,t)=>a+t.amount,0).toLocaleString("pt-BR",{minimumFractionDigits:2})} em aprova√ß√£o`})]})]}),e.jsxs("div",{className:"card p-5",style:{boxShadow:"var(--shadow-soft)"},children:[e.jsx("h3",{className:"text-sm font-bold mb-3",style:{color:"var(--color-text-primary)"},children:"Despesas por categoria (ano)"}),e.jsx("div",{className:"space-y-2.5",children:Object.keys(R).map(a=>{const t=f.filter(i=>i.category===a).reduce((i,v)=>i+v.amount,0),d=T>0?Math.round(t/T*100):0;return t===0?null:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs",style:{color:"var(--color-text-secondary)"},children:R[a]}),e.jsxs("span",{className:"text-xs font-semibold",style:{color:"var(--color-text-primary)"},children:["R$ ",t.toLocaleString("pt-BR",{minimumFractionDigits:2})," ¬∑ ",d,"%"]})]}),e.jsx("div",{className:"h-1.5 rounded-full",style:{background:"var(--color-border)"},children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${d}%`,background:"var(--foursys-gradient)"}})})]},a)})})]})]}),c==="pensao"&&e.jsxs("div",{className:"space-y-4",role:"tabpanel","aria-label":"Pens√£o Aliment√≠cia",children:[e.jsxs("div",{className:"card p-5",style:{boxShadow:"var(--shadow-soft)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold",style:{color:"var(--color-text-primary)"},children:"Configura√ß√£o da pens√£o"}),e.jsx("span",{className:"badge badge-confirmado",children:"Ativa"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Valor",value:`R$ ${C.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})}`},{label:"Vencimento",value:`Dia ${C.dueDay}`},{label:"Pagador",value:"Jo√£o Pereira"},{label:"Recebedor",value:"Maria Silva"}].map(a=>e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--color-text-tertiary)"},children:a.label}),e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--color-text-primary)"},children:a.value})]},a.label))})]}),e.jsxs("div",{className:"card p-5 space-y-3",style:{boxShadow:"var(--shadow-soft)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{size:16,style:{color:y?"var(--color-primary)":"var(--color-text-tertiary)"},"aria-hidden":"true"}),e.jsx("h3",{className:"text-sm font-bold",style:{color:"var(--color-text-primary)"},children:"Alertas de vencimento"})]}),e.jsxs("button",{onClick:()=>ae(a=>!a),className:"flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold transition-all",style:{background:y?"var(--color-confirmado-bg)":"var(--color-surface-alt)",color:y?"var(--color-confirmado)":"var(--color-text-tertiary)",border:`1px solid ${y?"var(--color-confirmado-border)":"var(--color-border)"}`},"aria-pressed":y,children:[y?e.jsx(_,{size:11}):e.jsx(ge,{size:11}),y?"Ativo":"Desativado"]})]}),y&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs mb-2",style:{color:"var(--color-text-secondary)"},children:"Alertar quantos dias antes do vencimento?"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,3,7].map(a=>e.jsxs("button",{onClick:()=>{ee(a),A(`Alerta configurado para ${a} dia(s) antes do vencimento.`,"success")},className:"py-2 rounded-xl text-sm font-bold transition-all",style:{background:k===a?"var(--color-primary)":"var(--color-surface-alt)",color:k===a?"#fff":"var(--color-text-secondary)",border:k===a?"none":"1px solid var(--color-border)"},"aria-pressed":k===a,children:[a," ",a===1?"dia":"dias"]},a))}),e.jsxs("p",{className:"text-xs mt-2",style:{color:"var(--color-text-tertiary)"},children:["Voc√™ receber√° alertas por push e e-mail ",k," dia(s) antes e no dia do vencimento."]})]})]}),e.jsxs("div",{className:"card p-5",style:{boxShadow:"var(--shadow-soft)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold",style:{color:"var(--color-text-primary)"},children:"Hist√≥rico de pagamentos"}),e.jsxs("button",{onClick:()=>x(!0),className:"btn-primary flex items-center gap-1.5 text-sm py-1.5",children:[e.jsx(fe,{size:14,"aria-hidden":"true"}),"Registrar pagamento"]})]}),e.jsx("ul",{className:"space-y-2","aria-label":"Hist√≥rico de pagamentos",children:N.map(a=>{const t=Y[a.status];return e.jsxs("li",{className:"flex items-center justify-between p-3 rounded-xl transition-all",style:{border:"1px solid var(--color-border)",borderLeft:`4px solid ${t.color}`},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"var(--color-surface-alt)"},"aria-hidden":"true",children:e.jsx("span",{className:"text-xs font-bold",style:{color:"var(--color-text-secondary)"},children:p(new Date(a.month+"-01"),"MMM",{locale:M}).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--color-text-primary)"},children:p(new Date(a.month+"-01"),"MMMM yyyy",{locale:M})}),e.jsxs("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:["Vence: ",p(new Date(a.dueDate),"dd/MM/yyyy"),a.paymentDate&&` ¬∑ Pago: ${p(new Date(a.paymentDate),"dd/MM/yyyy")}`]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold",style:{color:"var(--color-text-primary)"},children:["R$ ",(a.amountPaid??a.amount).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),a.receiptUrl&&e.jsx("a",{href:a.receiptUrl,className:"text-xs hover:underline",style:{color:"var(--color-primary)"},children:"Ver comprovante"})]}),e.jsx("span",{className:t.badgeClass,children:t.label})]})]},a.id)})})]})]}),c==="despesas"&&e.jsxs("div",{className:"space-y-4",role:"tabpanel","aria-label":"Despesas Extraordin√°rias",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm",style:{color:"var(--color-text-tertiary)"},children:["Minha participa√ß√£o estimada:"," ",e.jsxs("span",{className:"font-bold",style:{color:"var(--color-text-primary)"},children:["R$ ",re.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("button",{onClick:()=>r(!0),className:"btn-primary flex items-center gap-1.5 text-sm py-1.5",children:[e.jsx(ye,{size:14,"aria-hidden":"true"}),"Nova despesa"]})]}),f.length===0?e.jsxs("div",{className:"rounded-2xl p-10 text-center",style:{background:"var(--color-surface-alt)",border:"1px dashed var(--color-border-dark)"},children:[e.jsx(B,{size:32,className:"mx-auto mb-3",style:{color:"var(--color-text-tertiary)"}}),e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--color-text-tertiary)"},children:"Nenhuma despesa cadastrada"})]}):e.jsx("ul",{className:"space-y-3","aria-label":"Despesas extraordin√°rias",children:f.map(a=>{const t=Ne[a.status],d=a.status==="PENDENTE";return e.jsxs("li",{className:"card p-4",style:{borderLeft:`4px solid ${t.tokenVar}`},children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("span",{className:"text-sm",children:R[a.category]}),e.jsxs("div",{className:"flex items-center gap-1",style:{color:t.tokenVar},children:[t.icon,e.jsx("span",{className:"text-xs font-medium",children:t.label})]})]}),e.jsx("p",{className:"font-semibold",style:{color:"var(--color-text-primary)"},children:a.description}),e.jsxs("p",{className:"text-xs mt-0.5",style:{color:"var(--color-text-tertiary)"},children:[p(new Date(a.createdAt),"dd/MM/yyyy",{locale:M})," ¬∑ ","Divis√£o: ",a.payer1Share,"% / ",a.payer2Share,"%"]}),a.contestedReason&&e.jsx("div",{className:"mt-2 p-2 rounded-lg",style:{background:"rgba(220,38,38,0.06)",border:"1px solid rgba(220,38,38,0.15)"},children:e.jsxs("p",{className:"text-xs",style:{color:"var(--color-cancelado)"},children:[e.jsx("span",{className:"font-semibold",children:"Contesta√ß√£o:"})," ",a.contestedReason]})})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"text-lg font-bold",style:{color:"var(--color-text-primary)"},children:["R$ ",a.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:["Minha parte: R$ ",(a.amount*a.payer1Share/100).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),d&&e.jsxs("div",{className:"flex gap-2 mt-3 pt-3",style:{borderTop:"1px solid var(--color-border)"},children:[e.jsxs("button",{className:"flex items-center justify-center gap-1.5 flex-1 py-2 rounded-xl text-sm font-semibold",style:{background:"var(--color-confirmado-bg)",color:"var(--color-confirmado)",border:"1px solid var(--color-confirmado-border)"},onClick:()=>s({expense:a,action:"approve"}),children:[e.jsx(X,{size:14}),"Aprovar"]}),e.jsxs("button",{className:"flex items-center justify-center gap-1.5 flex-1 py-2 rounded-xl text-sm font-semibold",style:{background:"var(--color-cancelado-bg)",color:"var(--color-cancelado)",border:"1px solid var(--color-cancelado-border)"},onClick:()=>s({expense:a,action:"contest"}),children:[e.jsx(W,{size:14}),"Contestar"]})]})]},a.id)})})]}),c==="inadimplencia"&&e.jsxs("div",{className:"space-y-4",role:"tabpanel","aria-label":"Hist√≥rico de inadimpl√™ncia",children:[e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{label:"Total em aberto",value:`R$ ${q.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,color:"var(--color-cancelado)",bg:"var(--color-cancelado-bg)",icon:e.jsx(G,{size:18})},{label:"Multas e juros",value:`R$ ${le.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,color:"var(--color-pendente)",bg:"var(--color-pendente-bg)",icon:e.jsx(J,{size:18})},{label:"Meses inadimplentes",value:`${w.filter(a=>a.status==="EM_ABERTO").length}`,color:"var(--color-primary)",bg:"var(--color-primary-muted)",icon:e.jsx(xe,{size:18})}].map(a=>e.jsxs("div",{className:"card p-4 flex flex-col gap-1.5",style:{boxShadow:"var(--shadow-soft)",borderLeft:`4px solid ${a.color}`},children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:a.bg,color:a.color},"aria-hidden":"true",children:a.icon})}),e.jsx("p",{className:"text-lg font-extrabold leading-none",style:{color:"var(--color-text-primary)"},children:a.value}),e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:a.label})]},a.label))}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl",style:{background:"rgba(220,38,38,0.05)",border:"1px solid rgba(220,38,38,0.15)"},role:"note",children:[e.jsx(G,{size:14,style:{color:"var(--color-cancelado)",flexShrink:0,marginTop:1},"aria-hidden":"true"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--color-text-secondary)"},children:["Multa de ",e.jsx("strong",{children:"2%"})," e juros de ",e.jsx("strong",{children:"1% ao m√™s"})," s√£o informativos. O c√°lculo jur√≠dico exato deve ser feito pelo advogado. Este hist√≥rico pode ser exportado como evid√™ncia em processos de execu√ß√£o de alimentos."]})]}),e.jsxs("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--color-border)",boxShadow:"var(--shadow-soft)"},children:[e.jsx("div",{className:"grid grid-cols-6 px-4 py-2.5",style:{background:"var(--color-surface-alt)",borderBottom:"1px solid var(--color-border)"},children:["M√™s","Status","Valor","Atraso","Multa","Juros"].map(a=>e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider",style:{color:"var(--color-text-tertiary)"},children:a},a))}),w.map((a,t)=>{const i={PAGO_PRAZO:{label:"Pago no prazo",color:"var(--color-confirmado)",bg:"var(--color-confirmado-bg)"},PAGO_ATRASO:{label:"Pago com atraso",color:"var(--color-pendente)",bg:"var(--color-pendente-bg)"},EM_ABERTO:{label:"Em aberto",color:"var(--color-cancelado)",bg:"var(--color-cancelado-bg)"},SEM_DADOS:{label:"Sem dados",color:"var(--color-text-tertiary)",bg:"var(--color-surface-alt)"}}[a.status];return e.jsxs("div",{className:"grid grid-cols-6 px-4 py-3 items-center",style:{borderBottom:t<w.length-1?"1px solid var(--color-border)":"none",background:a.status==="EM_ABERTO"?"rgba(220,38,38,0.03)":t%2===0?"var(--color-surface)":"var(--color-surface-alt)"},children:[e.jsx("p",{className:"text-sm font-semibold capitalize",style:{color:"var(--color-text-primary)"},children:a.label}),e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold inline-flex items-center",style:{background:i.bg,color:i.color},children:i.label}),e.jsx("p",{className:"text-sm font-mono",style:{color:"var(--color-text-primary)"},children:a.amount>0?`R$ ${a.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"‚Äî"}),e.jsx("p",{className:"text-sm",style:{color:a.daysLate>0?"var(--color-cancelado)":"var(--color-text-tertiary)"},children:a.daysLate>0?`${a.daysLate}d`:"‚Äî"}),e.jsx("p",{className:"text-sm font-mono",style:{color:a.fine>0?"var(--color-pendente)":"var(--color-text-tertiary)"},children:a.fine>0?`R$ ${a.fine.toFixed(2)}`:"‚Äî"}),e.jsx("p",{className:"text-sm font-mono",style:{color:a.interest>0?"var(--color-pendente)":"var(--color-text-tertiary)"},children:a.interest>0?`R$ ${a.interest.toFixed(2)}`:"‚Äî"})]},a.key)})]})]}),u&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 fade-in",style:{zIndex:"var(--z-modal)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(4px)"},role:"dialog","aria-modal":"true","aria-labelledby":"modal-despesa-title",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden",style:{boxShadow:"0 24px 64px rgba(0,0,0,0.25)"},children:[e.jsxs("div",{className:"p-5 flex items-center justify-between",style:{background:"var(--foursys-gradient)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255,255,255,0.2)"},"aria-hidden":"true",children:e.jsx(F,{size:20,color:"#fff"})}),e.jsx("h3",{id:"modal-despesa-title",className:"text-lg font-bold text-white",children:"Nova despesa extraordin√°ria"})]}),e.jsx("button",{onClick:()=>r(!1),className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:"rgba(255,255,255,0.2)",color:"#fff"},"aria-label":"Fechar",children:e.jsx(L,{size:16})})]}),e.jsx("div",{className:"p-5 max-h-[80vh] overflow-y-auto",style:{background:"var(--color-surface)"},children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),r(!1),A("Despesa registrada! Co-guardi√£o ser√° notificado para aprovar em at√© 72h.","success")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Filho"}),e.jsx("select",{className:"input-field",children:pe.map(a=>e.jsx("option",{value:a.id,children:a.fullName},a.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Categoria"}),e.jsx("select",{className:"input-field",children:Object.entries(R).map(([a,t])=>e.jsx("option",{value:a,children:t},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Descri√ß√£o *"}),e.jsx("input",{type:"text",className:"input-field",placeholder:"Ex: Consulta m√©dica ortodontia",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Valor (R$) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:"input-field",placeholder:"0,00",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Minha parte (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",className:"input-field",defaultValue:"50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Outra parte (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",className:"input-field",defaultValue:"50"})]})]}),e.jsx(H,{label:"Nota fiscal / Comprovante",accept:"image/*,application/pdf",hint:"PDF ou imagem ¬∑ m√°x 10 MB"}),e.jsxs("div",{className:"flex gap-3 pt-1",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"btn-secondary flex-1",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn-gradient flex-1",children:"Registrar"})]})]})})]})}),j&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 fade-in",style:{zIndex:"var(--z-modal)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(4px)"},role:"dialog","aria-modal":"true","aria-labelledby":"modal-pagamento-title",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden",style:{boxShadow:"0 24px 64px rgba(0,0,0,0.25)"},children:[e.jsxs("div",{className:"p-5 flex items-center justify-between",style:{background:"linear-gradient(135deg, #16a34a, #0ea5e9)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255,255,255,0.2)"},"aria-hidden":"true",children:e.jsx(B,{size:20,color:"#fff"})}),e.jsx("h3",{id:"modal-pagamento-title",className:"text-lg font-bold text-white",children:"Registrar Pagamento"})]}),e.jsx("button",{onClick:()=>x(!1),className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:"rgba(255,255,255,0.2)",color:"#fff"},"aria-label":"Fechar",children:e.jsx(L,{size:16})})]}),e.jsx("div",{className:"p-5",style:{background:"var(--color-surface)"},children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),x(!1),A("Pagamento registrado com sucesso!","success")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1.5",style:{color:"var(--color-text-secondary)"},children:"M√™s de refer√™ncia *"}),e.jsx("input",{type:"month",className:"input-field",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Valor pago (R$) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:"input-field",defaultValue:"1800.00",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Data de pagamento *"}),e.jsx("input",{type:"date",className:"input-field",required:!0})]}),e.jsx(H,{label:"Comprovante banc√°rio",accept:"image/*,application/pdf",hint:"PDF ou imagem ¬∑ m√°x 10 MB"}),e.jsxs("div",{className:"flex gap-3 pt-1",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"btn-secondary flex-1",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn-gradient flex-1",children:"Registrar"})]})]})})]})}),o&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 fade-in",style:{zIndex:"var(--z-modal)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(4px)"},role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden",style:{boxShadow:"0 24px 64px rgba(0,0,0,0.25)"},children:[e.jsxs("div",{className:"p-5 flex items-center justify-between",style:{background:o.action==="approve"?"linear-gradient(135deg, #16a34a, #0ea5e9)":"linear-gradient(135deg, #dc2626, #f59e0b)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255,255,255,0.2)"},"aria-hidden":"true",children:o.action==="approve"?e.jsx(X,{size:20,color:"#fff"}):e.jsx(W,{size:20,color:"#fff"})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:o.action==="approve"?"Aprovar Despesa":"Contestar Despesa"})]}),e.jsx("button",{onClick:()=>{s(null),S("")},className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:"rgba(255,255,255,0.2)",color:"#fff"},"aria-label":"Fechar",children:e.jsx(L,{size:16})})]}),e.jsxs("div",{className:"p-5 space-y-4",style:{background:"var(--color-surface)"},children:[e.jsxs("div",{className:"p-3 rounded-xl",style:{background:"var(--color-surface-alt)",border:"1px solid var(--color-border)"},children:[e.jsx("p",{className:"text-sm font-bold",style:{color:"var(--color-text-primary)"},children:o.expense.description}),e.jsxs("p",{className:"text-xs mt-0.5",style:{color:"var(--color-text-tertiary)"},children:[R[o.expense.category]," ¬∑ R$ ",o.expense.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),o.action==="contest"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Motivo da contesta√ß√£o *"}),e.jsx("textarea",{className:"input-field resize-none",rows:3,placeholder:"Explique o motivo...",value:l,onChange:a=>S(a.target.value),required:!0,autoFocus:!0})]}),o.action==="approve"&&e.jsxs("div",{className:"p-3 rounded-xl flex items-start gap-2",style:{background:"var(--color-confirmado-bg)",border:"1px solid var(--color-confirmado-border)"},children:[e.jsx(V,{size:15,style:{color:"var(--color-confirmado)",flexShrink:0,marginTop:1}}),e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-secondary)"},children:"Ao aprovar, voc√™ confirma que reconhece esta despesa como leg√≠tima e concorda com a divis√£o proposta."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{s(null),S("")},className:"btn-secondary flex-1",children:"Cancelar"}),e.jsx("button",{type:"button",disabled:o.action==="contest"&&!l.trim(),style:{opacity:o.action==="contest"&&!l.trim()?.5:1},className:o.action==="approve"?"btn-success flex-1":"btn-danger flex-1",onClick:()=>{s(null),S(""),A(o.action==="approve"?"Despesa aprovada! Co-guardi√£o notificado.":"Contesta√ß√£o registrada.",o.action==="approve"?"success":"warning")},children:o.action==="approve"?"Confirmar aprova√ß√£o":"Confirmar contesta√ß√£o"})]})]})]})})]})}export{Fe as default};
