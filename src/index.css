@tailwind base;
@tailwind components;
@tailwind utilities;

/* ════════════════════════════════════════════════════════════
   DESIGN TOKENS — Guarda360° v1.0
   Light Edition · Confiança & Proteção
   Source: design-system/tokens/design-tokens.css
   ════════════════════════════════════════════════════════════ */

:root {
  /* ═══ GLOBAL: Azul Institucional (Primary) ═══ */
  --g-blue-50:   #EFF6FF;
  --g-blue-100:  #DBEAFE;
  --g-blue-200:  #BFDBFE;
  --g-blue-300:  #93C5FD;
  --g-blue-400:  #2563EB;
  --g-blue-500:  #1D4ED8;   /* ⭐ BRAND PRIMARY — 9.3:1 WCAG AAA */
  --g-blue-600:  #1E40AF;
  --g-blue-700:  #1E3A8A;
  --g-blue-800:  #172554;
  --g-blue-900:  #0F1B3D;

  /* ═══ GLOBAL: Neutros Slate ═══ */
  --g-slate-50:  #F8FAFC;
  --g-slate-100: #F1F5F9;
  --g-slate-200: #E2E8F0;
  --g-slate-300: #CBD5E1;
  --g-slate-400: #94A3B8;
  --g-slate-500: #64748B;
  --g-slate-600: #475569;
  --g-slate-700: #374151;
  --g-slate-800: #1E293B;
  --g-slate-900: #0F172A;

  /* ═══ GLOBAL: Status ═══ */
  --g-green-600:  #16A34A;
  --g-green-700:  #15803D;
  --g-green-bg:   rgba(22,163,74,0.08);
  --g-green-border: rgba(22,163,74,0.25);
  --g-amber-600:  #D97706;
  --g-amber-700:  #B45309;
  --g-amber-bg:   rgba(217,119,6,0.08);
  --g-amber-border: rgba(217,119,6,0.25);
  --g-red-600:    #DC2626;
  --g-red-700:    #B91C1C;
  --g-red-bg:     rgba(220,38,38,0.08);
  --g-red-border: rgba(220,38,38,0.25);
  --g-violet-600: #7C3AED;
  --g-violet-700: #6D28D9;
  --g-violet-bg:  rgba(124,58,237,0.08);
  --g-violet-border: rgba(124,58,237,0.30);
  --g-pink-600:   #DB2777;
  --g-pink-bg:    rgba(219,39,119,0.08);
  --g-pink-border: rgba(219,39,119,0.30);
  --g-sky-500:    #0EA5E9;
  --g-sky-bg:     rgba(14,165,233,0.08);
  --g-sky-border: rgba(14,165,233,0.25);

  /* ═══ ALIAS: Primary ═══ */
  --color-primary:          var(--g-blue-500);
  --color-primary-hover:    var(--g-blue-400);
  --color-primary-active:   var(--g-blue-600);
  --color-primary-muted:    rgba(29,78,216,0.08);
  --color-primary-border:   rgba(29,78,216,0.25);
  --color-on-primary:       #FFFFFF;

  /* ═══ ALIAS: Superfícies ═══ */
  --color-bg:               var(--g-slate-50);
  --color-surface:          #FFFFFF;
  --color-surface-alt:      var(--g-slate-100);
  --color-border:           var(--g-slate-200);
  --color-border-dark:      var(--g-slate-300);
  --color-border-focus:     var(--g-blue-500);

  /* ═══ ALIAS: Texto ═══ */
  --color-text-primary:     var(--g-slate-900);
  --color-text-secondary:   var(--g-slate-700);
  --color-text-tertiary:    var(--g-slate-500);
  --color-text-disabled:    var(--g-slate-400);
  --color-text-accent:      var(--g-blue-500);
  --color-text-inverse:     #FFFFFF;

  /* ═══ ALIAS: Status de Visita/Convivência ═══ */
  --color-confirmado:       var(--g-green-600);
  --color-confirmado-bg:    var(--g-green-bg);
  --color-confirmado-border: var(--g-green-border);
  --color-pendente:         var(--g-amber-600);
  --color-pendente-bg:      var(--g-amber-bg);
  --color-pendente-border:  var(--g-amber-border);
  --color-cancelado:        var(--g-red-600);
  --color-cancelado-bg:     var(--g-red-bg);
  --color-cancelado-border: var(--g-red-border);
  --color-falta:            var(--g-red-600);
  --color-falta-bg:         var(--g-red-bg);
  --color-atraso:           var(--g-amber-600);
  --color-atraso-bg:        var(--g-amber-bg);
  --color-cumprido:         var(--g-green-600);
  --color-cumprido-bg:      var(--g-green-bg);

  /* ═══ ALIAS: Severity de Ocorrências ═══ */
  --color-severity-low:           var(--g-green-600);
  --color-severity-low-bg:        var(--g-green-bg);
  --color-severity-low-border:    var(--g-green-border);
  --color-severity-medium:        var(--g-amber-600);
  --color-severity-medium-bg:     var(--g-amber-bg);
  --color-severity-medium-border: var(--g-amber-border);
  --color-severity-high:          var(--g-red-600);
  --color-severity-high-bg:       var(--g-red-bg);
  --color-severity-high-border:   var(--g-red-border);
  --color-severity-critical:      var(--g-violet-600);
  --color-severity-critical-bg:   var(--g-violet-bg);
  --color-severity-critical-border: var(--g-violet-border);

  /* ═══ ALIAS: Guardiões ═══ */
  --color-guardian-a:       var(--g-blue-400);
  --color-guardian-a-bg:    var(--g-blue-50);       /* #EFF6FF per DS spec */
  --color-guardian-a-border: rgba(37,99,235,0.30);
  --color-guardian-b:       var(--g-pink-600);
  --color-guardian-b-bg:    var(--g-pink-bg);
  --color-guardian-b-border: var(--g-pink-border);
  --color-guardian-shared:  var(--g-violet-600);
  --color-guardian-shared-bg: var(--g-violet-bg);

  /* ═══ ALIAS: Hash / Integridade SHA-256 ═══ */
  --color-hash-valid:       var(--g-sky-500);
  --color-hash-valid-bg:    var(--g-sky-bg);
  --color-hash-valid-border: var(--g-sky-border);
  --color-hash-invalid:     var(--g-red-600);
  --color-hash-invalid-bg:  var(--g-red-bg);

  /* ═══ SEMÂNTICAS ═══ */
  --color-success:          var(--g-green-600);
  --color-warning:          var(--g-amber-600);
  --color-error:            var(--g-red-600);
  --color-info:             var(--g-sky-500);

  /* ═══ TIPOGRAFIA ═══ */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;

  --text-xs:    0.75rem;
  --text-sm:    0.875rem;
  --text-base:  1rem;
  --text-lg:    1.125rem;
  --text-xl:    1.25rem;
  --text-2xl:   1.5rem;
  --text-3xl:   1.875rem;
  --text-4xl:   2.25rem;
  --text-hero:  3rem;     /* 48px — KPIs */

  --weight-regular:   400;
  --weight-medium:    500;
  --weight-semibold:  600;
  --weight-bold:      700;
  --weight-extrabold: 800;

  --leading-tight:   1.25;
  --leading-normal:  1.5;
  --leading-relaxed: 1.75;

  --tracking-wide:   0.04em;
  --tracking-wider:  0.06em;

  /* ═══ ESPAÇAMENTO (8pt grid) ═══ */
  --space-1:  0.25rem;
  --space-2:  0.5rem;
  --space-3:  0.75rem;
  --space-4:  1rem;
  --space-5:  1.25rem;
  --space-6:  1.5rem;
  --space-8:  2rem;
  --space-10: 2.5rem;
  --space-12: 3rem;
  --space-16: 4rem;

  /* ═══ BORDER RADIUS — Foursys Aligned ═══ */
  --radius-sm:    0.25rem;   /*  4px — badges menores */
  --radius-md:    0.5rem;    /*  8px — ícones, elementos internos */
  --radius-lg:    1rem;      /* 16px — cards, modais (Foursys LG) */
  --radius-xl:    1.25rem;   /* 20px — bottom sheets */
  --radius-2xl:   1.5rem;    /* 24px — hero cards */
  --radius-input: 1.25rem;   /* 20px — inputs, selects (Foursys LG) */
  --radius-pill:  9999px;    /* Pill — botões Foursys padrão */
  --radius-full:  9999px;    /* Alias */

  /* ═══ FOURSYS BRAND ═══ */
  --foursys-gradient:      linear-gradient(135deg, #9A1BFF 0%, #7B1CE5 40%, #4F46E5 100%);
  --foursys-gradient-dark: linear-gradient(135deg, #4C1D95 0%, #7C3AED 40%, #22C55E 100%);
  --foursys-accent:        #18C964;
  --foursys-accent-bg:     rgba(24,201,100,0.08);

  /* ═══ SOMBRAS — Foursys Aligned ═══ */
  --shadow-card:       0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-hover:      0 4px 12px rgba(29,78,216,0.12);
  --shadow-md:         0 4px 6px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
  --shadow-lg:         0 10px 25px rgba(0,0,0,0.12);
  --shadow-xl:         0 20px 40px rgba(0,0,0,0.15);
  --shadow-focus:      0 0 0 3px rgba(29,78,216,0.25);
  --shadow-inset:      inset 0 1px 2px rgba(0,0,0,0.06);
  --shadow-hash:       0 0 0 1px rgba(14,165,233,0.40);
  --shadow-soft:       0 10px 25px rgba(15,23,42,0.06);   /* Foursys soft */
  --shadow-soft-hover: 0 18px 45px rgba(15,23,42,0.10);  /* Foursys hover */

  /* ═══ ANIMAÇÃO ═══ */
  --dur-fast:   120ms;
  --dur-normal: 220ms;
  --dur-slow:   380ms;
  --ease:       cubic-bezier(0.4, 0, 0.2, 1);
  --ease-bounce: cubic-bezier(0.175, 0.885, 0.32, 1.275);
  --ease-out:   cubic-bezier(0, 0, 0.2, 1);

  /* ═══ SIZING (WCAG 2.5.5) ═══ */
  --touch-md:  44px;
  --touch-lg:  48px;
  --touch-fab: 56px;

  /* ═══ Z-INDEX ═══ */
  --z-base:    0;
  --z-sticky:  40;
  --z-overlay: 50;
  --z-modal:   60;
  --z-popover: 70;
  --z-toast:   80;
}

/* ──────────────────────────────────────────────────────
   BASE RESET
   ────────────────────────────────────────────────────── */
*, *::before, *::after {
  box-sizing: border-box;
}

html {
  font-family: var(--font-sans);
  font-size: var(--text-base);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  scroll-behavior: smooth;
}

body {
  background-color: var(--color-bg);
  color: var(--color-text-primary);
  line-height: var(--leading-normal);
  margin: 0;
  padding: 0;
}

::selection {
  background: rgba(29,78,216,0.15);
  color: var(--color-text-primary);
}

/* ─── Focus Accessibility ─── */
*:focus-visible {
  outline: none;
  box-shadow: var(--shadow-focus);
  border-radius: var(--radius-md);
}

/* ─── Scrollbar ─── */
::-webkit-scrollbar       { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(--color-surface-alt); }
::-webkit-scrollbar-thumb { background: var(--color-border-dark); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--g-slate-400); }

/* ──────────────────────────────────────────────────────
   ANIMATIONS
   ────────────────────────────────────────────────────── */
@keyframes pulse-dot {
  0%, 100% { opacity: 1; transform: scale(1); }
  50%       { opacity: 0.55; transform: scale(1.4); }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(4px); }
  to   { opacity: 1; transform: translateY(0); }
}

.pulse { animation: pulse-dot var(--dur-slow) ease-in-out infinite; }
.animate-spin { animation: spin 0.75s linear infinite; }
.fade-in { animation: fade-in var(--dur-normal) var(--ease-out); }

/* ──────────────────────────────────────────────────────
   TYPOGRAPHY UTILITIES (DS Semantic Scale)
   ────────────────────────────────────────────────────── */
.text-hero    { font-size: var(--text-hero);  font-weight: var(--weight-extrabold); line-height: var(--leading-tight); letter-spacing: -0.01em; }
.text-h1      { font-size: var(--text-4xl);   font-weight: var(--weight-bold);      line-height: var(--leading-tight); letter-spacing: -0.01em; }
.text-h2      { font-size: var(--text-3xl);   font-weight: var(--weight-bold);      line-height: var(--leading-tight); }
.text-h3      { font-size: var(--text-2xl);   font-weight: var(--weight-semibold);  line-height: 1.3; }
.text-h4      { font-size: var(--text-xl);    font-weight: var(--weight-semibold);  line-height: 1.4; }
.text-body    { font-size: var(--text-base);  font-weight: var(--weight-regular);   line-height: var(--leading-normal); }
.text-body-sm { font-size: var(--text-sm);    font-weight: var(--weight-regular);   line-height: var(--leading-normal); }
.text-label   { font-size: var(--text-xs);    font-weight: var(--weight-medium);    text-transform: uppercase; letter-spacing: var(--tracking-wide); }
.text-caption { font-size: var(--text-xs);    font-weight: var(--weight-regular);   line-height: 1.4; color: var(--color-text-tertiary); }
.text-timestamp { font-family: var(--font-mono); font-size: var(--text-xs); color: var(--color-text-tertiary); }
.text-hash    { font-family: var(--font-mono); font-size: var(--text-xs); font-weight: var(--weight-medium); letter-spacing: 0.02em; }
.text-legal   { font-size: var(--text-base);  line-height: var(--leading-relaxed); }

/* ──────────────────────────────────────────────────────
   COMPONENT LAYER
   ────────────────────────────────────────────────────── */
@layer components {

  /* ─── Card — Foursys: soft shadow, radius-lg ─── */
  .card {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-soft);    /* Foursys soft */
  }

  .card-hover {
    transition: box-shadow var(--dur-normal) var(--ease), transform var(--dur-normal) var(--ease);
  }
  .card-hover:hover {
    box-shadow: var(--shadow-soft-hover); /* Foursys soft-hover */
    transform: translateY(-1px);
  }

  /* ─── Buttons — Foursys: Pill radius, WCAG 44px min-height ─── */
  .btn-primary {
    display: inline-flex; align-items: center; justify-content: center;
    min-height: var(--touch-md);       /* 44px — WCAG 2.5.5 */
    padding: 0 var(--space-5);         /* 0 20px */
    background: var(--color-primary);
    color: var(--color-on-primary);
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    border-radius: var(--radius-pill); /* Foursys: pill */
    border: none;
    cursor: pointer;
    transition: background var(--dur-fast) var(--ease),
                box-shadow var(--dur-fast) var(--ease),
                transform var(--dur-fast) var(--ease);
  }
  .btn-primary:hover   { background: var(--color-primary-hover); box-shadow: var(--shadow-hover); }
  .btn-primary:active  { background: var(--color-primary-active); transform: scale(0.98); }
  .btn-primary:focus-visible { box-shadow: var(--shadow-focus); outline: none; }
  .btn-primary:disabled { opacity: 0.4; cursor: not-allowed; transform: none; box-shadow: none; }

  .btn-secondary {
    display: inline-flex; align-items: center; justify-content: center;
    min-height: var(--touch-md);
    padding: 0 var(--space-5);
    background: transparent;
    color: var(--color-primary);
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    border-radius: var(--radius-pill); /* Foursys: pill */
    border: 1px solid var(--color-primary-border);
    cursor: pointer;
    transition: background var(--dur-fast) var(--ease), transform var(--dur-fast) var(--ease);
  }
  .btn-secondary:hover  { background: var(--color-primary-muted); border-color: var(--color-primary); }
  .btn-secondary:active { transform: scale(0.98); }
  .btn-secondary:focus-visible { box-shadow: var(--shadow-focus); outline: none; }
  .btn-secondary:disabled { opacity: 0.4; cursor: not-allowed; }

  .btn-ghost {
    display: inline-flex; align-items: center; justify-content: center;
    min-height: var(--touch-md);
    padding: 0 var(--space-5);
    background: var(--color-surface-alt);
    color: var(--color-text-secondary);
    font-size: var(--text-sm);
    font-weight: var(--weight-medium);
    border-radius: var(--radius-pill); /* Foursys: pill */
    border: 1px solid var(--color-border);
    cursor: pointer;
    transition: background var(--dur-fast) var(--ease), transform var(--dur-fast) var(--ease);
  }
  .btn-ghost:hover  { background: var(--color-border); }
  .btn-ghost:active { transform: scale(0.98); }
  .btn-ghost:focus-visible { box-shadow: var(--shadow-focus); outline: none; }

  .btn-danger {
    display: inline-flex; align-items: center; justify-content: center;
    min-height: var(--touch-md);
    padding: 0 var(--space-5);
    background: var(--g-red-600);
    color: #FFFFFF;
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    border-radius: var(--radius-pill); /* Foursys: pill */
    border: none;
    cursor: pointer;
    transition: background var(--dur-fast) var(--ease), transform var(--dur-fast) var(--ease);
  }
  .btn-danger:hover  { background: var(--g-red-700); }
  .btn-danger:active { transform: scale(0.98); }
  .btn-danger:focus-visible { box-shadow: 0 0 0 3px rgba(220,38,38,0.25); outline: none; }

  .btn-success {
    display: inline-flex; align-items: center; justify-content: center;
    min-height: var(--touch-md);
    padding: 0 var(--space-5);
    background: var(--g-green-600);
    color: #FFFFFF;
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    border-radius: var(--radius-pill); /* Foursys: pill */
    border: none;
    cursor: pointer;
    transition: background var(--dur-fast) var(--ease), transform var(--dur-fast) var(--ease);
  }
  .btn-success:hover  { background: var(--g-green-700); }
  .btn-success:active { transform: scale(0.98); }
  .btn-success:focus-visible { box-shadow: 0 0 0 3px rgba(22,163,74,0.25); outline: none; }

  /* ─── Input — Foursys: radius 20px (LG) ─── */
  .input-field {
    width: 100%;
    min-height: 40px;
    padding: 0 var(--space-3);
    background: var(--color-surface);
    color: var(--color-text-primary);
    font-size: var(--text-sm);
    font-family: var(--font-sans);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-input); /* Foursys LG: 20px */
    transition: border-color var(--dur-fast) var(--ease),
                box-shadow var(--dur-fast) var(--ease);
  }
  .input-field::placeholder { color: var(--color-text-disabled); }
  .input-field:focus {
    outline: none;
    border-color: var(--color-border-focus);
    box-shadow: var(--shadow-focus);
  }
  .input-field:read-only {
    background: var(--color-bg);
    border-style: dashed;
    cursor: not-allowed;
    color: var(--color-text-tertiary);
  }
  .input-error {
    border-color: var(--g-red-600);
    box-shadow: 0 0 0 3px rgba(220,38,38,0.15);
  }

  /* ─── Badge (DS: radius-full · uppercase · semibold · letter-spacing) ─── */
  .badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: 2px var(--space-3);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: var(--weight-semibold);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wide);
    border: 1px solid transparent;
    white-space: nowrap;
  }

  .badge-confirmado {
    color: var(--color-confirmado);
    background: var(--color-confirmado-bg);
    border-color: var(--color-confirmado-border);
  }
  .badge-pendente {
    color: var(--color-pendente);
    background: var(--color-pendente-bg);
    border-color: var(--color-pendente-border);
  }
  .badge-cancelado,
  .badge-falta {
    color: var(--color-cancelado);
    background: var(--color-cancelado-bg);
    border-color: var(--color-cancelado-border);
  }
  .badge-atraso {
    color: var(--color-atraso);
    background: var(--color-atraso-bg);
    border-color: var(--color-pendente-border);
  }

  /* SeverityBadge — DS: font-weight bold */
  .badge-low      { color: var(--color-severity-low);      background: var(--color-severity-low-bg);      border-color: var(--color-severity-low-border);      font-weight: var(--weight-bold); }
  .badge-medium   { color: var(--color-severity-medium);   background: var(--color-severity-medium-bg);   border-color: var(--color-severity-medium-border);   font-weight: var(--weight-bold); }
  .badge-high     { color: var(--color-severity-high);     background: var(--color-severity-high-bg);     border-color: var(--color-severity-high-border);     font-weight: var(--weight-bold); }
  .badge-critical { color: var(--color-severity-critical); background: var(--color-severity-critical-bg); border-color: var(--color-severity-critical-border); font-weight: var(--weight-bold); }

  /* GuardianBadge — DS domain colors */
  .badge-guardian-a { color: var(--color-guardian-a); background: var(--color-guardian-a-bg); border-color: var(--color-guardian-a-border); }
  .badge-guardian-b { color: var(--color-guardian-b); background: var(--color-guardian-b-bg); border-color: var(--color-guardian-b-border); }

  /* HashBadge — DS: mono font, sky color, shadow-hash ring */
  .badge-hash {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: 2px var(--space-3);
    border-radius: var(--radius-sm);
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    font-weight: var(--weight-medium);
    color: var(--color-hash-valid);
    background: var(--color-hash-valid-bg);
    box-shadow: var(--shadow-hash);
    border: none;
    letter-spacing: 0.02em;
  }

  /* ─── Navigation ─── */
  .nav-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    font-weight: var(--weight-medium);
    color: var(--color-text-secondary);
    transition: background var(--dur-fast) var(--ease), color var(--dur-fast) var(--ease);
    cursor: pointer;
    text-decoration: none;
  }
  .nav-item:hover {
    background: var(--color-surface-alt);
    color: var(--color-text-primary);
  }

  .nav-item-active {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    color: var(--color-primary);
    background: var(--color-primary-muted);
    text-decoration: none;
    cursor: pointer;
  }

  /* ─── Severity border (OcorrenciaCard DS: border-left 4px) ─── */
  .card-severity-low      { border-left: 4px solid var(--color-severity-low); }
  .card-severity-medium   { border-left: 4px solid var(--color-severity-medium); }
  .card-severity-high     { border-left: 4px solid var(--color-severity-high); }
  .card-severity-critical { border-left: 4px solid var(--color-severity-critical); }

  /* ─── Calendar cell (DS spec) ─── */
  .cal-cell-guardian-a {
    background: var(--color-guardian-a-bg);
    border-left: 3px solid var(--color-guardian-a);
  }
  .cal-cell-guardian-b {
    background: var(--color-guardian-b-bg);
    border-left: 3px solid var(--color-guardian-b);
  }
  .cal-cell-shared {
    background: var(--color-guardian-shared-bg);
    border-left: 3px solid var(--color-guardian-shared);
  }
  .cal-cell-fault {
    background: var(--color-cancelado-bg);
    border-left: 3px solid var(--color-cancelado);
  }

  /* ─── Chat Bubble (DS spec) ─── */
  .bubble-sent {
    background: var(--color-primary-muted);
    color: var(--color-primary);
    border: 1px solid var(--color-primary-border);
    border-radius: var(--radius-lg);
    border-bottom-right-radius: var(--radius-sm);
  }
  .bubble-received {
    background: var(--color-surface-alt);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    border-bottom-left-radius: var(--radius-sm);
  }
  .bubble-relevant {
    border-left: 3px solid var(--g-amber-600);
    background: rgba(217,119,6,0.05);
  }

  /* ─── MetricCard — Foursys soft shadow ─── */
  .metric-card {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-soft);    /* Foursys soft */
    padding: var(--space-5);
    transition: box-shadow var(--dur-normal) var(--ease);
  }
  .metric-card:hover { box-shadow: var(--shadow-soft-hover); }
  .metric-number {
    font-size: var(--text-hero);
    font-weight: var(--weight-extrabold);
    line-height: var(--leading-tight);
    letter-spacing: -0.01em;
    color: var(--color-primary);
  }

  /* ─── Foursys Gradient Button (hero CTAs) ─── */
  .btn-gradient {
    display: inline-flex; align-items: center; justify-content: center;
    min-height: var(--touch-md);
    padding: 0 var(--space-6);
    background: var(--foursys-gradient);
    color: #FFFFFF;
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    border-radius: var(--radius-pill);
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(124,58,237,0.35);
    transition: opacity var(--dur-fast) var(--ease),
                box-shadow var(--dur-fast) var(--ease),
                transform var(--dur-fast) var(--ease);
  }
  .btn-gradient:hover  { opacity: 0.92; box-shadow: 0 6px 20px rgba(124,58,237,0.45); }
  .btn-gradient:active { transform: scale(0.98); }

  /* ─── Foursys Gradient Surface ─── */
  .surface-gradient {
    background: var(--foursys-gradient);
    color: #FFFFFF;
  }

  /* ─── Imutability indicator ─── */
  .immutable-field {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background: var(--color-bg);
    border: 1px dashed var(--color-border-dark);
    border-radius: var(--radius-md);
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    color: var(--color-text-tertiary);
  }
}
