# F-01.04 — Cadastro de Terceiros Autorizados

**Épico**: EP-01 — Identidade & Acesso  
**Agente**: @the-explorer  
**Versão**: 1.0 | **Data**: 2026-02-24

---

## 1. Descrição da Feature

Permite que responsáveis adicionem terceiros de confiança (avós, babás, tios) com acesso limitado a módulos específicos do app. O terceiro autorizado não tem poder de criar registros — apenas visualiza o que os responsáveis permitirem.

---

## 2. Solução Proposta

Interface de gestão de acessos onde o responsável adiciona um terceiro por email, define quais módulos ele pode visualizar, e envia convite. O terceiro cria uma conta simplificada (sem funções de guardião) e acessa apenas as seções autorizadas.

---

## 3. Escopo

### O que ENTRA
- Cadastro de terceiro por email
- Seleção de módulos permitidos (calendário, saúde, etc.)
- Permissão somente-leitura para terceiros (sem criação/edição)
- Listagem e remoção de terceiros autorizados por qualquer responsável
- Notificação ao terceiro via email

### O que NÃO ENTRA
- Terceiros com permissão de escrita — por design são read-only
- Advogados/profissionais com acesso especial — F-01.08
- Mais de 5 terceiros simultâneos no MVP

---

## 4. Premissas

- Ambos os responsáveis precisam concordar para adicionar um terceiro (aprovação dupla)
- Terceiro não vê ocorrências, chat entre os pais ou dados financeiros — nunca
- Acesso do terceiro pode ser revogado a qualquer momento por qualquer responsável

---

## 5. User Stories

| US | Tipo | Descrição | Esforço |
|----|------|-----------|---------|
| US-01.04.01 | Frontend | Como responsável, quero adicionar um terceiro autorizado por email e selecionar seus módulos | 3 |
| US-01.04.02 | Frontend | Como responsável, quero ver a lista de terceiros ativos e remover um deles | 2 |
| US-01.04.03 | Frontend | Como terceiro autorizado, quero ver apenas os módulos liberados para mim | 3 |
| US-01.04.04 | Backend | Endpoint POST /authorized-users — convida terceiro com permissões selecionadas | 3 |
| US-01.04.05 | Backend | Endpoint DELETE /authorized-users/:id — revoga acesso do terceiro | 1 |
| US-01.04.06 | Backend | RBAC: terceiro só acessa endpoints dos módulos autorizados | 3 |
| US-01.04.07 | Backend | Fluxo de aprovação dupla: ambos os responsáveis aprovam antes de ativar | 3 |

**Esforço Total**: 18 pontos

---

## 6. Critérios de Aceitação

- [ ] Terceiro só vê os módulos explicitamente liberados
- [ ] Revogação de acesso reflete em < 30 segundos
- [ ] Aprovação dupla é obrigatória antes da ativação
- [ ] Terceiro não tem acesso a chat, finanças ou ocorrências (proteção por RBAC)

---

## 7. Complexidade Técnica

**Nível**: Média | **Pontos**: 18  
**Riscos**: Lógica de aprovação dupla pode ser complexa; RBAC precisa ser granular por módulo
