# F-05.03 — Upload e Gestão de Atestados Médicos

**Épico**: EP-05 — Saúde & Desenvolvimento Escolar  
**Agente**: @the-explorer  
**Versão**: 1.0 | **Data**: 2026-02-24

---

## 1. Descrição da Feature

Repositório digital de atestados médicos do filho, acessível por ambos os responsáveis. Permite upload de atestados com metadados (data, médico, CRM, diagnóstico, dias de repouso), busca por período e compartilhamento com a escola quando necessário.

---

## 2. Solução Proposta

Lista de atestados ordenada por data, com campos de metadados e arquivo anexo. O responsável que fez a consulta faz o upload; o outro é notificado. Atestados podem ser filtrados por período e baixados quando necessário para apresentar à escola.

---

## 3. Escopo

### O que ENTRA
- Upload de atestado (PDF ou foto, até 10MB)
- Metadados: data, nome do médico, CRM, diagnóstico (opcional), dias de repouso
- Notificação ao outro responsável ao adicionar atestado
- Lista filtrada por período
- Download do atestado original
- Indicação de qual responsável adicionou

### O que NÃO ENTRA
- Validação do CRM via CRF-online — fase 2
- Compartilhamento automático com a escola — fase 2
- Reconhecimento de texto do atestado (OCR) — fase 3

---

## 4. Premissas

- Atestados são documentos permanentes — não expiram no S3
- O diagnóstico é campo opcional por questões de privacidade
- Atestados podem ser acessados pelo advogado autorizado

---

## 5. User Stories

| US | Tipo | Descrição | Esforço |
|----|------|-----------|---------|
| US-05.03.01 | Frontend | Como responsável, quero fazer upload de um atestado com metadados relevantes | 3 |
| US-05.03.02 | Frontend | Como responsável, quero ver todos os atestados do filho em ordem cronológica | 2 |
| US-05.03.03 | Frontend | Como responsável, quero baixar um atestado para apresentar à escola | 1 |
| US-05.03.04 | Backend | Endpoint POST /medical/certificates/:childId — cria atestado com S3 upload | 3 |
| US-05.03.05 | Backend | Endpoint GET /medical/certificates/:childId?from=&to= — lista paginada | 2 |
| US-05.03.06 | Backend | Notificação ao outro responsável ao adicionar atestado | 2 |

**Esforço Total**: 13 pontos

---

## 6. Critérios de Aceitação

- [ ] Upload de PDF de 5MB concluído em < 15 segundos
- [ ] Atestado visível para ambos os responsáveis imediatamente após upload
- [ ] Outro responsável notificado em < 60 segundos
- [ ] Download do arquivo original funciona (não comprimido)

---

## 7. Complexidade Técnica

**Nível**: Baixa | **Pontos**: 13
