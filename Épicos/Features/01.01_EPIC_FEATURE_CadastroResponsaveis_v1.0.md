# F-01.01 — Cadastro de Responsáveis com Verificação de Identidade

**Épico**: EP-01 — Identidade & Acesso  
**Agente**: @the-explorer  
**Versão**: 1.0 | **Data**: 2026-02-24

---

## 1. Descrição da Feature

Fluxo completo de onboarding de um responsável legal (pai ou mãe) no Guarda360°. Inclui registro com dados pessoais, verificação básica de identidade (CPF + email), aceite dos termos de uso e criação de perfil com foto.

---

## 2. Solução Proposta

Formulário em etapas (stepper) com validação em tempo real:
1. Dados pessoais (nome, CPF, data nascimento, telefone)
2. Credenciais (email + senha com política de senha forte)
3. Verificação de email (link de ativação)
4. Criação de perfil (foto, tipo de responsável, relação com a criança)
5. Aceite de Termos de Uso e Política de Privacidade (LGPD)

---

## 3. Escopo

### O que ENTRA
- Formulário de cadastro com validação de CPF
- Verificação por email (magic link ou código OTP)
- Upload de foto de perfil
- Aceite LGPD com timestamp
- Perfil criado e persistido no banco

### O que NÃO ENTRA
- Verificação facial (biometria) — fase futura
- Login social (Google, Apple) — fase 2
- Integração com cartório digital — fase Judicial

---

## 4. Premissas

- CPF válido é obrigatório (formato, não consulta Receita Federal no MVP)
- Email deve ser único no sistema
- Senha mínima: 8 caracteres, 1 maiúscula, 1 número, 1 especial
- Foto de perfil é opcional no MVP

---

## 5. User Stories

| US | Tipo | Descrição | Esforço |
|----|------|-----------|---------|
| US-01.01.01 | Frontend | Como visitante, quero me cadastrar com nome, CPF, email e senha | 3 |
| US-01.01.02 | Frontend | Como usuário, quero verificar meu email via link/OTP | 2 |
| US-01.01.03 | Frontend | Como usuário, quero fazer upload de foto de perfil | 2 |
| US-01.01.04 | Frontend | Como usuário, quero aceitar os Termos de Uso e Política LGPD | 1 |
| US-01.01.05 | Backend | Endpoint POST /auth/register com validação de CPF único e email único | 3 |
| US-01.01.06 | Backend | Serviço de envio de email de verificação | 2 |
| US-01.01.07 | Backend | Endpoint POST /auth/verify-email | 1 |
| US-01.01.08 | Backend | Upload de foto de perfil para S3 | 2 |

**Esforço Total**: 16 pontos (Fibonacci)

---

## 6. Critérios de Aceitação

- [ ] CPF inválido é rejeitado com mensagem clara
- [ ] Email duplicado retorna erro antes de completar o cadastro
- [ ] Email de verificação chega em < 60 segundos
- [ ] Aceite LGPD é registrado com timestamp e IP
- [ ] Perfil criado aparece na tela inicial após verificação

---

## 7. Complexidade Técnica

**Nível**: Médio  
**Pontos**: 16  
**Riscos**: Validação de CPF (formato apenas no MVP), entrega de email pode cair em spam
