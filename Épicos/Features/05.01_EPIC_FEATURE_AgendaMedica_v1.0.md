# F-05.01 — Agenda Médica Compartilhada

**Épico**: EP-05 — Saúde & Desenvolvimento Escolar  
**Agente**: @the-explorer  
**Versão**: 1.0 | **Data**: 2026-02-24

---

## 1. Descrição da Feature

Agenda médica compartilhada entre os responsáveis para registrar consultas, exames e procedimentos do filho. Qualquer responsável pode adicionar um compromisso médico — o outro é notificado. Histórico completo acessível por ambos, com opção de incluir no relatório jurídico.

---

## 2. Solução Proposta

Interface de lista + calendário para compromissos médicos. Formulário de cadastro com: tipo (consulta, exame, vacina, procedimento), especialidade, data/hora, local, médico responsável e observações. Integração visual com o calendário de convivência (mostra quem está com a criança no dia da consulta).

---

## 3. Escopo

### O que ENTRA
- Cadastro de consulta/exame com tipo, especialidade, data, local e médico
- Notificação ao outro responsável ao cadastrar
- Indicação de qual responsável está com a criança no dia (cruzamento com calendário)
- Histórico de consultas em ordem cronológica reversa
- Upload de resultado de exame como attachment
- Lembrete 1 dia antes da consulta

### O que NÃO ENTRA
- Integração com agendas médicas externas (plano de saúde, TeleMedicina) — fase 2
- Prescrição médica digital — fase 3
- Integração com prontuário eletrônico — fase 3

---

## 4. Premissas

- Qualquer responsável pode adicionar consultas
- O resultado de exame pode ser adicionado após a consulta (edição permitida para enriquecer o registro)
- A agenda médica é visível por ambos os responsáveis e pelo profissional autorizado

---

## 5. User Stories

| US | Tipo | Descrição | Esforço |
|----|------|-----------|---------|
| US-05.01.01 | Frontend | Como responsável, quero adicionar uma consulta médica com todos os dados | 3 |
| US-05.01.02 | Frontend | Como responsável, quero ver a agenda médica futura e o histórico passado | 2 |
| US-05.01.03 | Frontend | Como responsável, quero ver quem está com a criança no dia da consulta | 1 |
| US-05.01.04 | Frontend | Como responsável, quero receber lembrete 1 dia antes da consulta | 1 |
| US-05.01.05 | Backend | Endpoint POST /medical/appointments — cria consulta | 2 |
| US-05.01.06 | Backend | Endpoint GET /medical/appointments/:childId — lista consultas futuras e passadas | 2 |
| US-05.01.07 | Backend | Job: notificação 24h antes da consulta | 2 |
| US-05.01.08 | Backend | Notificação ao outro responsável ao adicionar consulta | 2 |

**Esforço Total**: 15 pontos

---

## 6. Critérios de Aceitação

- [ ] Notificação ao outro responsável chega em < 60 segundos
- [ ] Lembrete de 24h chega com 22-26h de antecedência
- [ ] Indicação de responsável ativo no dia cruza com o calendário de convivência
- [ ] Histórico de 2 anos visível sem paginação obrigatória

---

## 7. Complexidade Técnica

**Nível**: Baixa | **Pontos**: 15
