# F-05.06 — Notificações de Consultas Agendadas

**Épico**: EP-05 — Saúde & Desenvolvimento Escolar  
**Agente**: @the-explorer  
**Versão**: 1.0 | **Data**: 2026-02-24

---

## 1. Descrição da Feature

Sistema de alertas automáticos para consultas médicas agendadas no app: lembrete 1 dia antes e lembrete 2 horas antes. Notifica ambos os responsáveis, com indicação de quem está com a criança no dia. Registra automaticamente se a consulta foi confirmada ou não.

---

## 2. Solução Proposta

Job cron diário e horário verifica consultas próximas e dispara notificações. Integra com o calendário de convivência para informar qual responsável estará com a criança no dia da consulta, facilitando a logística.

---

## 3. Escopo

### O que ENTRA
- Push + email 1 dia antes da consulta para ambos os responsáveis
- Push 2 horas antes da consulta
- Indicação de qual responsável está com a criança no dia
- Após a consulta: prompt para registrar resultado/atestado
- Alerta se consulta passou sem nenhum registro de resultado

### O que NÃO ENTRA
- Confirmação de presença na consulta (check-in médico) — fase 2
- Integração com agenda do médico para confirmação de horário — fase 3

---

## 4. Premissas

- Notificações são enviadas para ambos os responsáveis sempre
- O fuso horário local do usuário é usado para calcular horário do push
- Prompt de resultado aparece 30min após o horário da consulta

---

## 5. User Stories

| US | Tipo | Descrição | Esforço |
|----|------|-----------|---------|
| US-05.06.01 | Backend | Job cron: alertas 24h antes de consultas agendadas (push + email) | 3 |
| US-05.06.02 | Backend | Job cron: alerta 2h antes de consulta (push) | 2 |
| US-05.06.03 | Backend | Job cron: prompt de resultado 30min após consulta | 2 |
| US-05.06.04 | Frontend | Como responsável, quero ver no push qual responsável está com a criança | 1 |

**Esforço Total**: 8 pontos

---

## 6. Critérios de Aceitação

- [ ] Alerta de 24h chega com 22-26h de antecedência
- [ ] Alerta de 2h chega com 1h50min a 2h10min de antecedência
- [ ] Prompt de resultado aparece após a consulta

---

## 7. Complexidade Técnica

**Nível**: Baixa | **Pontos**: 8  
**Nota**: Reutiliza infraestrutura de notificações de F-02.08 — baixo esforço adicional
