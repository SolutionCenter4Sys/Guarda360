# F-06.02 — Classificação por Tipo de Ocorrência

**Épico**: EP-06 — Ocorrências & Incidentes  
**Agente**: @the-explorer  
**Versão**: 1.0 | **Data**: 2026-02-24

---

## 1. Descrição da Feature

Sistema de categorização das ocorrências por tipo jurídico, facilitando a organização do histórico e a geração de relatórios segmentados. O tipo da ocorrência determina qual seção do relatório jurídico ela aparece e pode acionar alertas específicos (ex: alienação parental aciona notificação para advogado).

---

## 2. Solução Proposta

Seleção obrigatória de tipo no formulário de registro de ocorrência. Cada tipo tem descrição explicativa (tooltip) para guiar o usuário. O tipo é fixo após o registro (imutabilidade). Filtros por tipo disponíveis no histórico e nos relatórios.

---

## 3. Escopo

### Tipos de Ocorrência MVP

| Tipo | Código | Descrição |
|------|--------|-----------|
| Alienação Parental | PARENTAL_ALIENATION | Comportamentos que visam prejudicar a relação da criança com o outro responsável |
| Descumprimento de Guarda | CUSTODY_BREACH | Não cumprimento de horários, falta sem justificativa, impedimento de visitas |
| Situação de Risco | RISK | Situações de perigo físico, emocional ou psicológico para a criança |
| Descumprimento Financeiro | FINANCIAL_BREACH | Não pagamento de pensão, recusa de despesas essenciais |
| Outro | OTHER | Fatos relevantes não categorizados nos tipos anteriores |

### O que ENTRA
- Seleção obrigatória de tipo no formulário
- Tooltip explicativo por tipo
- Filtro por tipo no histórico
- Tipo como dado no relatório jurídico
- Tipo "Alienação Parental" e "Situação de Risco" aciona notificação ao advogado (se cadastrado)

### O que NÃO ENTRA
- Tipos customizados pelo usuário — fase 2
- Subtipos — fase 2

---

## 4. Premissas

- O tipo é selecionado no momento do registro e não pode ser alterado depois
- A lista de tipos é gerenciada pelo admin (seed no banco + possibilidade de expansão)

---

## 5. User Stories

| US | Tipo | Descrição | Esforço |
|----|------|-----------|---------|
| US-06.02.01 | Frontend | Como responsável, quero selecionar o tipo da ocorrência com tooltips explicativos | 2 |
| US-06.02.02 | Frontend | Como responsável, quero filtrar o histórico de ocorrências por tipo | 2 |
| US-06.02.03 | Backend | Seed dos tipos de ocorrência no banco de dados | 1 |
| US-06.02.04 | Backend | Validação: tipo é obrigatório e deve estar na lista permitida | 1 |
| US-06.02.05 | Backend | Trigger: notificação ao advogado para tipos críticos | 2 |

**Esforço Total**: 8 pontos

---

## 6. Critérios de Aceitação

- [ ] Formulário não submete sem tipo selecionado
- [ ] Tipo correto aparece no relatório PDF
- [ ] Ocorrência de "Alienação Parental" notifica advogado em < 5 minutos

---

## 7. Complexidade Técnica

**Nível**: Baixa | **Pontos**: 8
