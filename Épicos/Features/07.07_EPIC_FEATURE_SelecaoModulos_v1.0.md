# F-07.07 — Seleção de Módulos a Incluir no Relatório

**Épico**: EP-07 — Relatórios & Exportação Jurídica  
**Agente**: @the-explorer  
**Versão**: 1.0 | **Data**: 2026-02-24

---

## 1. Descrição da Feature

Interface de configuração do conteúdo do relatório: o responsável escolhe quais módulos incluir (Convivência, Chat, Financeiro, Ocorrências, Saúde) e configurações específicas de cada módulo (ex: no Chat, incluir apenas relevantes ou todas). Permite gerar relatórios completos ou focados em aspectos específicos do caso.

---

## 2. Solução Proposta

Checklist de módulos com sub-opções para cada um. Preview dinâmico do índice do relatório baseado nas seleções. Botão de "Gerar Relatório" ativado apenas quando pelo menos 1 módulo é selecionado.

---

## 3. Escopo

### Módulos e Sub-opções

| Módulo | Sub-opções Configuráveis |
|--------|--------------------------|
| Convivência | Incluir estatísticas / Incluir tabela detalhada |
| Chat | Apenas relevantes / Todas as mensagens / Apenas ofensivas |
| Financeiro | Pensão / Despesas / Inadimplência / Comprovantes (referência) |
| Ocorrências | Todos os tipos / Apenas tipos selecionados / Apenas Alta/Crítica |
| Saúde & Escola | Consultas / Vacinas / Atestados |
| Linha do Tempo | Incluir / Não incluir |

### O que ENTRA
- Checklist de módulos com sub-opções
- Preview do índice do relatório
- Contagem estimada de páginas do PDF
- Aviso quando a combinação selecionada pode gerar PDF muito grande (> 100 páginas estimadas)

### O que NÃO ENTRA
- Ordem customizável dos módulos no relatório — fase 2
- Templates de relatório salvos — fase 2

---

## 4. Premissas

- O relatório inclui sempre a capa e o índice (não são opcionais)
- A linha do tempo é um módulo à parte que sumariza todos os selecionados
- Módulos de saúde só aparecem se o EP-05 tiver sido usado pelo responsável

---

## 5. User Stories

| US | Tipo | Descrição | Esforço |
|----|------|-----------|---------|
| US-07.07.01 | Frontend | Como responsável, quero selecionar módulos e sub-opções para o relatório | 3 |
| US-07.07.02 | Frontend | Como responsável, quero ver o índice preview do relatório antes de gerar | 2 |
| US-07.07.03 | Frontend | Como responsável, quero ver estimativa de páginas do PDF | 1 |
| US-07.07.04 | Backend | A seleção de módulos é passada como parâmetro ao job de geração (POST /reports/generate) | 2 |

**Esforço Total**: 8 pontos

---

## 6. Critérios de Aceitação

- [ ] Botão "Gerar" desativado sem nenhum módulo selecionado
- [ ] Índice preview atualiza em tempo real conforme seleção
- [ ] Estimativa de páginas tem precisão de ± 20%

---

## 7. Complexidade Técnica

**Nível**: Baixa | **Pontos**: 8
