# F-06.03 — Classificação por Gravidade

**Épico**: EP-06 — Ocorrências & Incidentes  
**Agente**: @the-explorer  
**Versão**: 1.0 | **Data**: 2026-02-24

---

## 1. Descrição da Feature

Sistema de classificação de gravidade das ocorrências em quatro níveis (Baixa, Média, Alta, Crítica). A gravidade determina a prioridade visual no histórico, aciona alertas específicos (Alta/Crítica notificam o advogado em tempo real) e é destacada no relatório jurídico.

---

## 2. Solução Proposta

Seleção obrigatória de gravidade no formulário com indicadores visuais de cor. Descrição de cada nível para guiar o usuário. A gravidade é imutável após o registro. Ocorrências Críticas geram alerta imediato para o advogado e destacam-se no dashboard do responsável.

---

## 3. Escopo

### Escala de Gravidade

| Nível | Cor | Descrição | Ação Automática |
|-------|-----|-----------|-----------------|
| Baixa | Verde | Incidente menor, informativo | Registrado sem alerta |
| Média | Âmbar | Situação preocupante, monitorar | Registrado com atenção |
| Alta | Vermelho | Situação grave, requer ação | Notifica advogado em 1h |
| Crítica | Roxo | Emergência, perigo imediato | Notifica advogado em 5min |

### O que ENTRA
- Seleção obrigatória de gravidade com indicadores visuais
- Descrição de cada nível (tooltip/ajuda)
- Destaque visual proporcional à gravidade no histórico
- Notificação automática ao advogado para Alta e Crítica
- Badge de gravidade no dashboard para ocorrências Críticas não resolvidas
- Gravidade como critério de ordenação/filtro no histórico

### O que NÃO ENTRA
- Elevação automática de gravidade — fase 2
- Reconhecimento de gravidade por IA — fase 3

---

## 4. Premissas

- A gravidade é escolhida pelo responsável e não pode ser alterada após o registro
- O advogado só é notificado se estiver cadastrado e autorizado no perfil
- Uma ocorrência Crítica ativa um badge vermelho no dashboard até ser "reconhecida"

---

## 5. User Stories

| US | Tipo | Descrição | Esforço |
|----|------|-----------|---------|
| US-06.03.01 | Frontend | Como responsável, quero selecionar a gravidade com cores e descrições claras | 2 |
| US-06.03.02 | Frontend | Como responsável, quero ver ocorrências destacadas pela cor de gravidade no histórico | 2 |
| US-06.03.03 | Frontend | Como responsável, quero ver badge de alerta no dashboard para ocorrências Críticas | 2 |
| US-06.03.04 | Backend | Notificação imediata ao advogado para gravidade Alta e Crítica | 3 |
| US-06.03.05 | Backend | Endpoint PATCH /incidents/:id/acknowledge — responsável reconhece ocorrência crítica | 1 |

**Esforço Total**: 10 pontos

---

## 6. Critérios de Aceitação

- [ ] Gravidade Crítica notifica advogado em < 5 minutos
- [ ] Gravidade Alta notifica advogado em < 1 hora
- [ ] Badge de Crítica no dashboard desaparece após "reconhecimento"
- [ ] Relatório PDF lista ocorrências em ordem decrescente de gravidade

---

## 7. Complexidade Técnica

**Nível**: Baixa | **Pontos**: 10
