# F-05.07 — Histórico Médico Unificado por Filho

**Épico**: EP-05 — Saúde & Desenvolvimento Escolar  
**Agente**: @the-explorer  
**Versão**: 1.0 | **Data**: 2026-02-24

---

## 1. Descrição da Feature

Visão consolidada de todo o histórico de saúde do filho: consultas, vacinas, atestados e alergias/condições de saúde em uma única tela. Funciona como um prontuário simplificado acessível por ambos os responsáveis — especialmente útil em emergências quando um dos pais não tem as informações.

---

## 2. Solução Proposta

Dashboard de saúde com seções: Alergias e condições (fixo no topo), Última consulta, Próxima vacina pendente, Timeline de eventos de saúde (ordem cronológica reversa unindo consultas + vacinas + atestados).

---

## 3. Escopo

### O que ENTRA
- Seção de dados fixos: alergias, tipo sanguíneo, condições crônicas (ex: asma), medicação contínua
- Timeline unificada: consultas + vacinas + atestados em ordem cronológica
- Filtros por tipo de evento (só consultas, só vacinas, etc.)
- Dados acessíveis por profissional de saúde autorizado pelo responsável
- Campo de contato de emergência médico (médico de família, pediatra)

### O que NÃO ENTRA
- Integração com prontuário eletrônico (e-SUS, SCTIE) — fase 3
- Compartilhamento com plano de saúde — fase 3

---

## 4. Premissas

- Dados fixos (alergias, condições) são editáveis por qualquer responsável
- A timeline une dados de F-05.01 (consultas), F-05.02 (vacinas), F-05.03 (atestados)
- Informações de emergência são visíveis sem login pelo profissional (requer QR Code especial — fase 2)

---

## 5. User Stories

| US | Tipo | Descrição | Esforço |
|----|------|-----------|---------|
| US-05.07.01 | Frontend | Como responsável, quero ver o resumo de saúde do filho com alergias e condições no topo | 2 |
| US-05.07.02 | Frontend | Como responsável, quero ver a timeline unificada de saúde (consultas + vacinas + atestados) | 3 |
| US-05.07.03 | Frontend | Como responsável, quero filtrar a timeline por tipo de evento | 2 |
| US-05.07.04 | Backend | Endpoint GET /health/summary/:childId — dados fixos + próxima vacina + última consulta | 2 |
| US-05.07.05 | Backend | Endpoint GET /health/timeline/:childId?type= — timeline unificada paginada | 3 |
| US-05.07.06 | Backend | Endpoint PUT /health/fixed-data/:childId — atualiza alergias, condições, medicações | 2 |

**Esforço Total**: 14 pontos

---

## 6. Critérios de Aceitação

- [ ] Timeline de 2 anos de saúde carregada em < 2 segundos
- [ ] Alergias aparecem em destaque no topo da página
- [ ] Dados fixos atualizados por um responsável refletem imediatamente para o outro

---

## 7. Complexidade Técnica

**Nível**: Baixa-Média | **Pontos**: 14  
**Nota**: Agrega dados de múltiplas features — requer bom design de query
