import{c as L,r as n,_ as d,j as e,$ as x,S as f,l as u,F as v,T as N,D as m,k as y,L as z,a0 as I}from"./index-DduWlyHt.js";import{S as w}from"./search-CcHmTwnr.js";import{E as R}from"./eye-CONcyIQe.js";import{U as k}from"./user-plus-CTbmHoEh.js";import{U as _}from"./upload-CazXprGT.js";import{a as O,c as P,i as A,b as g,L as E}from"./isToday-BwPed4hj.js";import{t as M,c as H,f as b,p as T}from"./pt-BR-Cb6bWWUC.js";import{p as j}from"./parseISO-BYvTlcex.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=L("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function U(r,o){const i=M(r);return isNaN(o)?H(r,NaN):(i.setDate(i.getDate()+o),i)}function G(r,o){return U(r,-1)}function B(r){return O(r,G(P(r)))}const D={LOGIN:{label:"Login",icon:e.jsx(E,{size:14}),color:"#059669"},LOGOUT:{label:"Logout",icon:e.jsx(g,{size:14}),color:"#6b7280"},LOGIN_FAILED:{label:"Tentativa falha",icon:e.jsx(I,{size:14}),color:"#dc2626"},PASSWORD_CHANGED:{label:"Senha alterada",icon:e.jsx(z,{size:14}),color:"#d97706"},"2FA_ENABLED":{label:"2FA ativado",icon:e.jsx(f,{size:14}),color:"#7c3aed"},"2FA_DISABLED":{label:"2FA desativado",icon:e.jsx(f,{size:14}),color:"#dc2626"},MESSAGE_SENT:{label:"Mensagem enviada",icon:e.jsx(y,{size:14}),color:"#0ea5e9"},MESSAGE_MARKED_RELEVANT:{label:"Mensagem marcada",icon:e.jsx(y,{size:14}),color:"#7c3aed"},EXPENSE_CREATED:{label:"Despesa criada",icon:e.jsx(m,{size:14}),color:"#d97706"},EXPENSE_APPROVED:{label:"Despesa aprovada",icon:e.jsx(m,{size:14}),color:"#059669"},EXPENSE_CONTESTED:{label:"Despesa contestada",icon:e.jsx(m,{size:14}),color:"#dc2626"},PAYMENT_REGISTERED:{label:"Pagamento registrado",icon:e.jsx(m,{size:14}),color:"#059669"},INCIDENT_CREATED:{label:"Ocorrência criada",icon:e.jsx(N,{size:14}),color:"#dc2626"},INCIDENT_UPDATED:{label:"Ocorrência atualizada",icon:e.jsx(N,{size:14}),color:"#d97706"},REPORT_GENERATED:{label:"Relatório gerado",icon:e.jsx(v,{size:14}),color:"#0ea5e9"},REPORT_DOWNLOADED:{label:"Relatório baixado",icon:e.jsx(v,{size:14}),color:"#7c3aed"},CALENDAR_EVENT_CREATED:{label:"Evento criado",icon:e.jsx(u,{size:14}),color:"#0ea5e9"},CHECKIN:{label:"Check-in",icon:e.jsx(E,{size:14}),color:"#059669"},CHECKOUT:{label:"Check-out",icon:e.jsx(g,{size:14}),color:"#6b7280"},SWAP_REQUESTED:{label:"Troca solicitada",icon:e.jsx(u,{size:14}),color:"#d97706"},SWAP_ACCEPTED:{label:"Troca aceita",icon:e.jsx(u,{size:14}),color:"#059669"},SWAP_REJECTED:{label:"Troca recusada",icon:e.jsx(u,{size:14}),color:"#dc2626"},DOCUMENT_UPLOADED:{label:"Documento enviado",icon:e.jsx(_,{size:14}),color:"#0ea5e9"},AUTHORIZED_PERSON_INVITED:{label:"Profissional convidado",icon:e.jsx(k,{size:14}),color:"#7c3aed"},JUDICIAL_MODE_ACTIVATED:{label:"Modo Judicial",icon:e.jsx(R,{size:14}),color:"#dc2626"}},h={AUTH:"Autenticação",CALENDAR:"Calendário",CHAT:"Chat",FINANCIAL:"Financeiro",INCIDENT:"Ocorrências",HEALTH:"Saúde",REPORTS:"Relatórios",SETTINGS:"Configurações"},$=r=>{const o=j(r);return A(o)?`Hoje, ${b(o,"HH:mm")}`:B(o)?`Ontem, ${b(o,"HH:mm")}`:b(o,"dd 'de' MMM 'às' HH:mm",{locale:T})};function Z(){const[r,o]=n.useState(""),[i,S]=n.useState("ALL"),[s,c]=n.useState(null),p=n.useMemo(()=>d.filter(a=>{if(i!=="ALL"&&a.module!==i)return!1;if(r){const l=r.toLowerCase();return a.description.toLowerCase().includes(l)||a.userName.toLowerCase().includes(l)||a.action.toLowerCase().includes(l)}return!0}).sort((a,l)=>new Date(l.timestamp).getTime()-new Date(a.timestamp).getTime()),[r,i]);return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-5",children:[e.jsxs("div",{className:"rounded-2xl overflow-hidden",style:{background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",boxShadow:"0 6px 24px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{className:"px-5 pt-5 pb-4 flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(124,58,237,0.3)"},"aria-hidden":"true",children:e.jsx(x,{size:20,style:{color:"#a78bfa"}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-extrabold text-white leading-tight",children:"Log de Auditoria"}),e.jsx("p",{className:"text-xs",style:{color:"rgba(255,255,255,0.55)"},children:"Registro imutável de todas as ações na plataforma"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-semibold",style:{background:"rgba(5,150,105,0.2)",color:"#34d399"},children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34d399] animate-pulse","aria-hidden":"true"}),"Monitoramento ativo"]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-px",style:{borderTop:"1px solid rgba(255,255,255,0.08)"},children:[{label:"Ações hoje",value:d.filter(a=>A(j(a.timestamp))).length},{label:"Falhas de login",value:d.filter(a=>a.action==="LOGIN_FAILED").length},{label:"Guardiões ativos",value:2},{label:"Total registros",value:d.length}].map(a=>e.jsxs("div",{className:"px-4 py-3 text-center",children:[e.jsx("p",{className:"text-2xl font-extrabold text-white leading-none",children:a.value}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"rgba(255,255,255,0.45)"},children:a.label})]},a.label))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl",style:{background:"rgba(220,38,38,0.06)",border:"1px solid rgba(220,38,38,0.15)"},role:"note",children:[e.jsx(f,{size:15,style:{color:"#dc2626",flexShrink:0,marginTop:1},"aria-hidden":"true"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--color-text-secondary)"},children:["Este log é ",e.jsx("strong",{children:"imutável e assinado digitalmente"}),". Qualquer tentativa de alteração invalida a cadeia de custódia. Dados disponíveis para exportação judicial mediante solicitação ao suporte."]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(w,{size:15,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:"var(--color-text-tertiary)"},"aria-hidden":"true"}),e.jsx("input",{type:"text",value:r,onChange:a=>o(a.target.value),placeholder:"Buscar por ação, usuário…",className:"input-field",style:{paddingLeft:"2.25rem"},"aria-label":"Buscar logs"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:"var(--color-text-tertiary)"},"aria-hidden":"true"}),e.jsxs("select",{value:i,onChange:a=>S(a.target.value),className:"input-field pl-8 pr-8 text-sm","aria-label":"Filtrar por módulo",children:[e.jsx("option",{value:"ALL",children:"Todos os módulos"}),Object.entries(h).map(([a,l])=>e.jsx("option",{value:a,children:l},a))]})]})]}),p.length===0?e.jsxs("div",{className:"rounded-2xl p-10 text-center",style:{background:"var(--color-surface-alt)",border:"1px dashed var(--color-border-dark)"},children:[e.jsx(x,{size:32,className:"mx-auto mb-3",style:{color:"var(--color-text-tertiary)"},"aria-hidden":"true"}),e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--color-text-tertiary)"},children:"Nenhum registro encontrado"})]}):e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{background:"var(--color-surface)",border:"1px solid var(--color-border)",boxShadow:"var(--shadow-soft)"},children:p.map((a,l)=>{const t=D[a.action]??{label:a.action,icon:e.jsx(x,{size:14}),color:"#6b7280"};return e.jsxs("div",{className:"flex items-start gap-3 px-4 py-3 cursor-pointer transition-all",style:{borderBottom:l<p.length-1?"1px solid var(--color-border)":"none"},onClick:()=>c(a),role:"button",tabIndex:0,onKeyDown:C=>{C.key==="Enter"&&c(a)},"aria-label":`Detalhe: ${t.label} — ${a.userName}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-xl flex items-center justify-center flex-shrink-0 mt-0.5",style:{background:`${t.color}15`,color:t.color},"aria-hidden":"true",children:t.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs font-bold px-2 py-0.5 rounded-full",style:{background:`${t.color}15`,color:t.color},children:t.label}),e.jsx("span",{className:"text-xs font-medium",style:{color:"var(--color-text-secondary)"},children:a.userName}),e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded-md",style:{background:"var(--color-surface-alt)",color:"var(--color-text-tertiary)"},children:h[a.module]})]}),e.jsx("p",{className:"text-xs mt-0.5 truncate",style:{color:"var(--color-text-tertiary)"},children:a.description}),a.ip&&e.jsxs("p",{className:"text-xs mt-0.5 font-mono",style:{color:"var(--color-text-disabled)"},children:["IP: ",a.ip," · ",a.device]})]}),e.jsx("span",{className:"text-xs flex-shrink-0",style:{color:"var(--color-text-tertiary)"},children:$(a.timestamp)})]},a.id)})}),s&&(()=>{const a=D[s.action]??{label:s.action,icon:e.jsx(x,{size:14}),color:"#6b7280"};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 fade-in",style:{zIndex:"var(--z-modal)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(4px)"},role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden",style:{boxShadow:"0 24px 64px rgba(0,0,0,0.25)"},children:[e.jsxs("div",{className:"p-5 flex items-center justify-between",style:{background:"#0f172a"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:`${a.color}25`,color:a.color},"aria-hidden":"true",children:a.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-white",children:a.label}),e.jsxs("p",{className:"text-xs",style:{color:"rgba(255,255,255,0.5)"},children:["ID: ",s.id]})]})]}),e.jsx("button",{onClick:()=>c(null),className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:"rgba(255,255,255,0.1)",color:"#fff"},"aria-label":"Fechar",children:"×"})]}),e.jsxs("div",{className:"p-5 space-y-3",style:{background:"var(--color-surface)"},children:[[{label:"Usuário",value:s.userName},{label:"Perfil",value:s.userRole==="GUARDIAN_1"?"Guardião A":s.userRole==="GUARDIAN_2"?"Guardião B":"Visualizador"},{label:"Módulo",value:h[s.module]},{label:"Descrição",value:s.description},{label:"IP",value:s.ip??"—"},{label:"Dispositivo",value:s.device??"—"},{label:"Data/hora",value:b(j(s.timestamp),"dd 'de' MMMM 'de' yyyy 'às' HH:mm:ss",{locale:T})},s.resourceId?{label:"Recurso",value:s.resourceId}:null].filter(Boolean).map((l,t)=>l&&e.jsxs("div",{className:"p-3 rounded-xl",style:{background:"var(--color-surface-alt)"},children:[e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:l.label}),e.jsx("p",{className:"text-sm font-semibold mt-0.5 break-all",style:{color:"var(--color-text-primary)"},children:l.value})]},t)),e.jsxs("div",{className:"p-3 rounded-xl",style:{background:"rgba(220,38,38,0.05)",border:"1px solid rgba(220,38,38,0.15)"},children:[e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:"Hash de integridade (SHA-256)"}),e.jsxs("p",{className:"text-xs font-mono mt-1 break-all",style:{color:"var(--color-text-secondary)"},children:["sha256:",Array.from(s.id).map(l=>l.charCodeAt(0).toString(16).padStart(2,"0")).join(""),"f4a8b2e1"]})]}),e.jsx("button",{onClick:()=>c(null),className:"btn-secondary w-full",children:"Fechar"})]})]})})})()]})}export{Z as default};
