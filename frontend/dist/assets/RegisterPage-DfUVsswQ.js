import{c as F,a as P,r as x,j as e,M as w,C as z,d as L,S as E,L as D,b as R}from"./index-DduWlyHt.js";import{U as q}from"./user-h3ZtA02L.js";import{C}from"./circle-alert-D4zJIj6G.js";import{P as I}from"./phone-JWb-0SsZ.js";import{E as G}from"./eye-off-Cq4GUKh6.js";import{E as M}from"./eye-CONcyIQe.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=F("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),T=o=>o.replace(/\D/g,"").slice(0,11).replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2"),O=o=>{const s=o.replace(/\D/g,"");if(s.length!==11||/^(\d)\1{10}$/.test(s))return!1;let n=0;for(let c=0;c<9;c++)n+=parseInt(s[c])*(10-c);let l=n*10%11;if((l===10||l===11)&&(l=0),l!==parseInt(s[9]))return!1;n=0;for(let c=0;c<10;c++)n+=parseInt(s[c])*(11-c);return l=n*10%11,(l===10||l===11)&&(l=0),l===parseInt(s[10])},U=o=>{const s=o.replace(/\D/g,"").slice(0,11);return s.length<=10?s.replace(/(\d{2})(\d{4})(\d{0,4})/,"($1) $2-$3").trim():s.replace(/(\d{2})(\d{5})(\d{0,4})/,"($1) $2-$3").trim()},V=o=>{let s=0;return o.length>=8&&s++,/[A-Z]/.test(o)&&s++,/[0-9]/.test(o)&&s++,/[^A-Za-z0-9]/.test(o)&&s++,[{label:"",color:"var(--color-border)"},{label:"Fraca",color:"var(--color-cancelado)"},{label:"M√©dia",color:"var(--color-pendente)"},{label:"Boa",color:"#0ea5e9"},{label:"Forte",color:"var(--color-confirmado)"}][s]};function Q(){const o=P(),[s,n]=x.useState("form"),[l,c]=x.useState(!1),[d,h]=x.useState(!1),[f,b]=x.useState(""),[y,p]=x.useState(""),[u,j]=x.useState(["","","","","",""]),g=x.useRef([]),[t,m]=x.useState({fullName:"",cpf:"",email:"",phone:"",password:"",confirmPassword:"",role:"GUARDIAN_1",termsAccepted:!1}),v=V(t.password),k=async r=>{if(r.preventDefault(),b(""),p(""),!O(t.cpf)){b("CPF inv√°lido. Verifique os d√≠gitos.");return}if(t.password!==t.confirmPassword){p("As senhas n√£o coincidem.");return}if(t.password.length<8){p("A senha deve ter pelo menos 8 caracteres.");return}h(!0),await new Promise(a=>setTimeout(a,1e3)),h(!1),n("verify-email")},S=(r,a)=>{var N;if(!/^\d?$/.test(a))return;const i=[...u];i[r]=a,j(i),a&&r<5&&((N=g.current[r+1])==null||N.focus())},$=(r,a)=>{var i;a.key==="Backspace"&&!u[r]&&r>0&&((i=g.current[r-1])==null||i.focus())},A=async r=>{r.preventDefault(),h(!0),await new Promise(a=>setTimeout(a,800)),h(!1),n("done")};return s==="verify-email"?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"var(--color-bg)"},children:e.jsxs("div",{className:"w-full max-w-sm fade-in space-y-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl mb-4",style:{background:"var(--foursys-gradient)",boxShadow:"0 8px 24px rgba(124,58,237,0.35)"},"aria-hidden":"true",children:e.jsx(w,{size:28,className:"text-white"})}),e.jsx("h2",{className:"text-2xl font-extrabold",style:{color:"var(--color-text-primary)"},children:"Verifique seu e-mail"}),e.jsxs("p",{className:"text-sm mt-2",style:{color:"var(--color-text-tertiary)"},children:["Enviamos um c√≥digo de 6 d√≠gitos para"," ",e.jsx("span",{className:"font-semibold",style:{color:"var(--color-text-primary)"},children:t.email})]})]}),e.jsxs("div",{className:"card p-6 space-y-5",style:{boxShadow:"var(--shadow-soft)",borderTop:"3px solid transparent",borderImage:"var(--foursys-gradient) 1"},children:[e.jsxs("form",{onSubmit:A,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-label block text-center mb-3",style:{color:"var(--color-text-secondary)"},children:"C√≥digo de verifica√ß√£o"}),e.jsx("div",{className:"flex gap-2 justify-center",children:u.map((r,a)=>e.jsx("input",{ref:i=>{g.current[a]=i},type:"text",inputMode:"numeric",maxLength:1,value:r,onChange:i=>S(a,i.target.value),onKeyDown:i=>$(a,i),className:"w-11 h-12 text-center text-xl font-bold rounded-xl border-2 transition-all outline-none",style:{border:`2px solid ${r?"var(--color-primary)":"var(--color-border-dark)"}`,background:"var(--color-surface-alt)",color:"var(--color-text-primary)"},"aria-label":`D√≠gito ${a+1}`,autoFocus:a===0},a))})]}),e.jsx("button",{type:"submit",className:"btn-gradient w-full flex items-center justify-center gap-2",disabled:d||u.join("").length<6,style:{opacity:d||u.join("").length<6?.55:1},"aria-busy":d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),"Verificando‚Ä¶"]}):"Verificar e ativar conta"})]}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("button",{type:"button",className:"text-sm font-semibold",style:{color:"var(--color-primary)"},onClick:()=>{j(["","","","","",""])},children:"Reenviar c√≥digo"}),e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:"üí° Demo: qualquer c√≥digo de 6 d√≠gitos funciona"})]})]})]})}):s==="done"?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"var(--color-bg)"},children:e.jsxs("div",{className:"w-full max-w-sm text-center space-y-5 fade-in",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl mb-2",style:{background:"linear-gradient(135deg, #059669, #0ea5e9)"},"aria-hidden":"true",children:e.jsx(z,{size:40,className:"text-white"})}),e.jsx("h2",{className:"text-2xl font-extrabold",style:{color:"var(--color-text-primary)"},children:"Conta ativada com sucesso!"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-tertiary)"},children:"Bem-vindo(a) ao Guarda360¬∞. Sua identidade foi verificada e sua conta est√° pronta."}),e.jsxs("div",{className:"p-4 rounded-xl space-y-2",style:{background:"var(--color-surface-alt)",border:"1px solid var(--color-border)"},children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--color-text-primary)"},children:t.fullName}),e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:t.email}),e.jsx("p",{className:"text-xs font-mono",style:{color:"var(--color-text-tertiary)"},children:t.cpf})]}),e.jsxs("button",{onClick:()=>o("/login",{replace:!0}),className:"btn-gradient w-full flex items-center justify-center gap-2",children:["Acessar a plataforma",e.jsx(L,{size:16,"aria-hidden":"true"})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"var(--color-bg)"},children:e.jsxs("div",{className:"w-full max-w-sm fade-in",children:[e.jsxs("div",{className:"text-center mb-7",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl mb-3",style:{background:"var(--foursys-gradient)",boxShadow:"0 8px 24px rgba(124,58,237,0.35)"},"aria-hidden":"true",children:e.jsx(E,{size:32,className:"text-white"})}),e.jsxs("h1",{className:"text-2xl font-extrabold",style:{color:"var(--color-text-primary)"},children:["Guarda",e.jsx("span",{style:{background:"var(--foursys-gradient)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"360¬∞"})]}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--color-text-tertiary)"},children:"Crie sua conta gratuitamente"})]}),e.jsxs("div",{className:"card p-6",style:{boxShadow:"var(--shadow-soft)",borderTop:"3px solid transparent",borderImage:"var(--foursys-gradient) 1"},children:[e.jsx("h2",{className:"text-xl font-bold mb-5",style:{color:"var(--color-text-primary)"},children:"Cadastro"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reg-name",className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Nome completo *"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{size:15,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:"var(--color-text-tertiary)"},"aria-hidden":"true"}),e.jsx("input",{id:"reg-name",type:"text",required:!0,autoFocus:!0,value:t.fullName,onChange:r=>m(a=>({...a,fullName:r.target.value})),className:"input-field",style:{paddingLeft:"2.25rem"},placeholder:"Seu nome completo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reg-cpf",className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"CPF *"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{size:15,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:"var(--color-text-tertiary)"},"aria-hidden":"true"}),e.jsx("input",{id:"reg-cpf",type:"text",required:!0,maxLength:14,value:t.cpf,onChange:r=>{m(a=>({...a,cpf:T(r.target.value)})),b("")},className:`input-field font-mono ${f?"input-error":""}`,style:{paddingLeft:"2.25rem"},placeholder:"000.000.000-00","aria-describedby":f?"cpf-error":void 0})]}),f&&e.jsxs("p",{id:"cpf-error",className:"flex items-center gap-1 text-xs mt-1",style:{color:"var(--color-cancelado)"},children:[e.jsx(C,{size:12,"aria-hidden":"true"}),f]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reg-email",className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"E-mail *"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{size:15,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:"var(--color-text-tertiary)"},"aria-hidden":"true"}),e.jsx("input",{id:"reg-email",type:"email",required:!0,value:t.email,onChange:r=>m(a=>({...a,email:r.target.value})),className:"input-field",style:{paddingLeft:"2.25rem"},placeholder:"seu@email.com",autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reg-phone",className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Telefone"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{size:15,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:"var(--color-text-tertiary)"},"aria-hidden":"true"}),e.jsx("input",{id:"reg-phone",type:"tel",value:t.phone,onChange:r=>m(a=>({...a,phone:U(r.target.value)})),className:"input-field",style:{paddingLeft:"2.25rem"},placeholder:"(11) 99999-9999"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Meu papel na guarda *"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"GUARDIAN_1",label:"Guardi√£o A",desc:"Respons√°vel principal"},{value:"GUARDIAN_2",label:"Guardi√£o B",desc:"Co-guardi√£o"}].map(r=>e.jsxs("label",{className:"flex flex-col gap-0.5 p-2.5 rounded-xl cursor-pointer transition-all",style:{background:t.role===r.value?"var(--color-primary-muted)":"var(--color-surface-alt)",border:`1.5px solid ${t.role===r.value?"var(--color-primary)":"var(--color-border)"}`},children:[e.jsx("input",{type:"radio",name:"role",value:r.value,className:"sr-only",checked:t.role===r.value,onChange:()=>m(a=>({...a,role:r.value}))}),e.jsx("span",{className:"text-sm font-bold",style:{color:t.role===r.value?"var(--color-primary)":"var(--color-text-primary)"},children:r.label}),e.jsx("span",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:r.desc})]},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reg-password",className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{size:15,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:"var(--color-text-tertiary)"},"aria-hidden":"true"}),e.jsx("input",{id:"reg-password",type:l?"text":"password",required:!0,minLength:8,value:t.password,onChange:r=>{m(a=>({...a,password:r.target.value})),p("")},className:`input-field ${y?"input-error":""}`,style:{paddingLeft:"2.25rem",paddingRight:"2.5rem"},placeholder:"M√≠nimo 8 caracteres",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>c(r=>!r),className:"absolute right-3 top-1/2 -translate-y-1/2",style:{color:"var(--color-text-disabled)"},"aria-label":l?"Ocultar senha":"Mostrar senha",children:l?e.jsx(G,{size:16}):e.jsx(M,{size:16})})]}),t.password&&e.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[e.jsx("div",{className:"flex gap-1 flex-1",children:[1,2,3,4].map(r=>e.jsx("div",{className:"h-1 flex-1 rounded-full transition-all",style:{background:["Fraca","M√©dia","Boa","Forte"].indexOf(v.label)+1>=r?v.color:"var(--color-border)"}},r))}),e.jsx("span",{className:"text-xs font-semibold",style:{color:v.color},children:v.label})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reg-confirm",className:"text-label block mb-1.5",style:{color:"var(--color-text-secondary)"},children:"Confirmar senha *"}),e.jsx("input",{id:"reg-confirm",type:"password",required:!0,value:t.confirmPassword,onChange:r=>{m(a=>({...a,confirmPassword:r.target.value})),p("")},className:`input-field ${y?"input-error":""}`,placeholder:"Repita a senha",autoComplete:"new-password"}),y&&e.jsxs("p",{className:"flex items-center gap-1 text-xs mt-1",style:{color:"var(--color-cancelado)"},children:[e.jsx(C,{size:12,"aria-hidden":"true"}),y]})]}),e.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",required:!0,checked:t.termsAccepted,onChange:r=>m(a=>({...a,termsAccepted:r.target.checked})),className:"rounded mt-0.5"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--color-text-secondary)"},children:["Aceito os"," ",e.jsx("span",{className:"font-semibold",style:{color:"var(--color-primary)"},children:"Termos de Uso"})," ","e a"," ",e.jsx("span",{className:"font-semibold",style:{color:"var(--color-primary)"},children:"Pol√≠tica de Privacidade (LGPD)"}),", incluindo o registro imut√°vel de comunica√ß√µes para fins jur√≠dicos."]})]}),e.jsx("button",{type:"submit",disabled:d||!t.termsAccepted,className:"btn-gradient w-full flex items-center justify-center gap-2",style:{opacity:d||!t.termsAccepted?.55:1},"aria-busy":d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),"Criando conta‚Ä¶"]}):"Criar conta"})]})]}),e.jsxs("p",{className:"text-center text-sm mt-4",style:{color:"var(--color-text-tertiary)"},children:["J√° tem conta?"," ",e.jsx(R,{to:"/login",className:"font-semibold",style:{color:"var(--color-primary)"},children:"Entrar"})]})]})})}export{Q as default};
