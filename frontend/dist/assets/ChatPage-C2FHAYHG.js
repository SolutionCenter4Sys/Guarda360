import{c as L,r as o,o as M,f as ue,i as fe,x as b,y as pe,j as e,n as Y,L as I,I as he,T as ve,w as ge,t as Q,X as te,F as be}from"./index-DduWlyHt.js";import{H as ye}from"./Badge-BwjyIJz_.js";import{F as je}from"./FileUpload-CJ1fZ0gc.js";import{E as Ne}from"./eye-off-Cq4GUKh6.js";import{E as ee}from"./eye-CONcyIQe.js";import{D as le}from"./download-Cux2d8XB.js";import{t as ae,m as ke,f as y,p as P}from"./pt-BR-Cb6bWWUC.js";import{p as j}from"./parseISO-BYvTlcex.js";import"./upload-CazXprGT.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=L("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=L("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=L("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=L("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function Ae(r){return i=>{const d=Math.trunc,n=d(i);return n===0?0:n}}function Re(r,i){return+ae(r)-+ae(i)}function Se(r,i,d){const n=Re(r,i)/ke;return Ae()(n)}const Ce=["idiota","imbecil","burro","miserável","inútil","incompetente","irresponsável","negligente","vagabundo","louco","psicopata","mentiroso","manipulador"],Me=r=>{const i=r.toLowerCase();return Ce.some(d=>i.includes(d))},Ie=(r,i)=>r.filter(d=>{if(d.senderId===i)return!1;const n=Se(new Date,j(d.createdAt));return!d.read&&n>=24}).length;function Pe(){var X;const[r,i]=o.useState(M[0].id),[d,n]=o.useState(ue),[v,f]=o.useState(""),[m,N]=o.useState("ALL"),[D,p]=o.useState(!1),[z,A]=o.useState(!1),[l,T]=o.useState("GUARDIAN"),[h,q]=o.useState(!1),[$,F]=o.useState(0),B=o.useRef(null),O=o.useRef(null),H=o.useRef(null),{toast:S}=fe(),k=d.filter(a=>a.childId===r),R=k.filter(a=>m==="RELEVANT"?a.isLegallyRelevant:m==="OFFENSIVE"?a.offensiveDetected:l==="VIEWER"?a.isLegallyRelevant:!0),V=Ie(k,b.id),oe=k.filter(a=>a.offensiveDetected).length,_=k.filter(a=>a.isLegallyRelevant).length;o.useEffect(()=>{var a;(a=B.current)==null||a.scrollIntoView({behavior:"smooth"})},[R]),o.useEffect(()=>{n(a=>a.map(s=>s.childId===r&&s.senderId!==b.id&&!s.read?{...s,read:!0}:s))},[r]);const W=a=>{if(a==null||a.preventDefault(),!v.trim())return;const s=v.trim(),t=Me(s),w={id:`msg-${Date.now()}`,childId:r,senderId:b.id,senderName:b.fullName,senderRole:"GUARDIAN_1",type:"TEXT",content:s,isLegallyRelevant:!1,offensiveDetected:t,createdAt:new Date().toISOString(),delivered:!0,read:!1};n(u=>[...u,w]),f(""),O.current&&(O.current.style.height="auto"),t&&setTimeout(()=>{S("⚠️ Linguagem potencialmente ofensiva detectada. A mensagem foi registrada com marcação automática.","warning")},800)},ne=a=>{n(s=>s.map(t=>t.id===a?{...t,isLegallyRelevant:!t.isLegallyRelevant}:t))},ie=()=>{q(!0),F(0),H.current=setInterval(()=>F(a=>a+1),1e3)},J=()=>{H.current&&clearInterval(H.current),q(!1),F(0);const a={id:`msg-${Date.now()}`,childId:r,senderId:b.id,senderName:b.fullName,senderRole:"GUARDIAN_1",type:"AUDIO",content:`[Mensagem de áudio — ${$}s]`,isLegallyRelevant:!1,offensiveDetected:!1,createdAt:new Date().toISOString(),delivered:!0,read:!1};n(s=>[...s,a]),S("Áudio enviado com registro de integridade!","success")},ce=(a,s)=>{const t=new Date;t.setDate(t.getDate()-s);const w=k.filter(c=>a==="RELEVANT"&&!c.isLegallyRelevant?!1:j(c.createdAt)>=t).sort((c,G)=>new Date(c.createdAt).getTime()-new Date(G.createdAt).getTime()),u=M.find(c=>c.id===r),g=["GUARDA360° — EXPORTAÇÃO DE CHAT",`Filho(a): ${(u==null?void 0:u.fullName)??r}`,`Período: últimos ${s} dias`,`Tipo: ${a==="RELEVANT"?"Apenas mensagens relevantes":"Todas as mensagens"}`,`Data de exportação: ${y(new Date,"dd/MM/yyyy 'às' HH:mm")}`,`Total de mensagens: ${w.length}`,"","ATENÇÃO: Este arquivo foi gerado pelo sistema Guarda360° e tem valor jurídico.","Hash de integridade calculado no servidor (SHA-256).",`${"─".repeat(60)}`,""];w.forEach(c=>{const G=y(j(c.createdAt),"dd/MM/yyyy HH:mm:ss",{locale:P}),me=c.senderRole==="GUARDIAN_1"?"[Guardião A]":"[Guardião B]",Z=[c.isLegallyRelevant?"★ RELEVANTE":"",c.offensiveDetected?"⚠ SINALIZADO":""].filter(Boolean).join(" | ");g.push(`${G} ${me} ${c.senderName}`),g.push(`${c.content}`),Z&&g.push(`  ${Z}`),g.push("")});const C=new Blob([g.join(`
`)],{type:"text/plain;charset=utf-8"}),U=URL.createObjectURL(C),E=document.createElement("a");E.href=U,E.download=`guarda360-chat-${u==null?void 0:u.fullName.split(" ")[0]}-${y(new Date,"yyyyMMdd")}.txt`,E.click(),URL.revokeObjectURL(U),S("Chat exportado com sucesso!","success"),A(!1)},K=a=>{try{return y(j(a),"HH:mm",{locale:P})}catch{return""}},de=(a,s)=>{try{return y(j(a),"dd/MM")===y(j(s),"dd/MM")}catch{return!1}},xe=pe.filter(a=>a.linkedChildIds.includes(r)&&a.status==="ATIVO"),x=l==="VIEWER";return e.jsxs("div",{className:"max-w-4xl mx-auto h-[calc(100vh-8rem)] flex flex-col gap-3",children:[e.jsxs("div",{className:"card p-3 flex items-center justify-between flex-wrap gap-3 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("select",{value:r,onChange:a=>i(a.target.value),className:"input-field w-auto",style:{minHeight:"36px",padding:"0 12px"},children:M.map(a=>e.jsxs("option",{value:a.id,children:[a.fullName.split(" ")[0]," ",a.fullName.split(" ").slice(-1)[0]]},a.id))}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"pulse w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:"var(--color-confirmado)"}}),e.jsx("span",{className:"text-body-sm",style:{color:"var(--color-text-tertiary)"},children:"João Pereira online"})]}),xe.length>0&&e.jsxs("button",{onClick:()=>T(a=>a==="GUARDIAN"?"VIEWER":"GUARDIAN"),className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold transition-all",style:{background:x?"rgba(124,58,237,0.1)":"var(--color-surface-alt)",color:x?"#7c3aed":"var(--color-text-secondary)",border:`1px solid ${x?"rgba(124,58,237,0.3)":"var(--color-border)"}`},title:x?"Sair do modo visualizador":"Simular visão de profissional","aria-pressed":x,children:[x?e.jsx(Ne,{size:12}):e.jsx(ee,{size:12}),x?"Visão do profissional":"Visão profissional"]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"flex gap-1 p-0.5 rounded-full",style:{background:"var(--color-surface-alt)",border:"1px solid var(--color-border)"},children:[["ALL","Todos",void 0],["RELEVANT",`★ ${_}`,"var(--g-amber-600)"],["OFFENSIVE",`⚠️ ${oe}`,"var(--color-cancelado)"]].map(([a,s,t])=>e.jsx("button",{onClick:()=>N(a),className:"px-2.5 py-1 rounded-full text-xs font-semibold transition-all",style:{background:m===a?"var(--color-surface)":"transparent",color:m===a?t??"var(--color-primary)":"var(--color-text-tertiary)",boxShadow:m===a?"var(--shadow-soft)":"none"},"aria-pressed":m===a,children:s},a))}),e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-full text-xs font-semibold transition-all",style:{background:"var(--color-surface-alt)",color:"var(--color-text-secondary)",border:"1px solid var(--color-border)"},"aria-label":"Exportar chat",children:[e.jsx(le,{size:12,"aria-hidden":"true"}),"Exportar"]})]})]}),V>0&&!x&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-xl flex-shrink-0 fade-in",style:{background:"rgba(245,158,11,0.08)",border:"1px solid rgba(245,158,11,0.25)"},role:"alert","aria-live":"polite",children:[e.jsx(Y,{size:14,style:{color:"#d97706",flexShrink:0},"aria-hidden":"true"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--color-text-secondary)"},children:[e.jsxs("strong",{children:[V," ",V===1?"mensagem não respondida":"mensagens não respondidas"]})," ","há mais de 24 horas. Isso fica registrado no histórico para relatórios jurídicos."]})]}),e.jsxs("div",{className:"immutable-field flex-shrink-0 fade-in",role:"note","aria-label":"Aviso de comunicação monitorada",children:[e.jsx(I,{size:13,style:{color:"var(--color-primary)",flexShrink:0},"aria-hidden":"true"}),e.jsx("span",{children:x?e.jsxs("span",{style:{color:"var(--color-text-secondary)"},children:[e.jsx("span",{className:"font-semibold",style:{color:"#7c3aed"},children:"Modo visualizador ativo."})," ","Exibindo apenas mensagens marcadas como juridicamente relevantes."]}):e.jsxs("span",{style:{color:"var(--color-text-secondary)"},children:[e.jsx("span",{className:"font-semibold",style:{color:"var(--color-primary)"},children:"Comunicação monitorada."})," ","Todas as mensagens são registradas com valor jurídico e não podem ser excluídas."]})})]}),e.jsxs("div",{className:"card flex-1 overflow-hidden flex flex-col p-0",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",role:"log","aria-label":"Histórico de mensagens","aria-live":"polite",children:[R.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[e.jsx(he,{size:32,style:{color:"var(--color-border-dark)"},className:"mb-2","aria-hidden":"true"}),e.jsx("p",{className:"text-body-sm",style:{color:"var(--color-text-tertiary)"},children:m==="OFFENSIVE"?"Nenhuma mensagem sinalizada":m==="RELEVANT"?"Nenhuma mensagem relevante":"Nenhuma mensagem ainda"})]}),R.map((a,s)=>{var C;const t=a.senderId===b.id,w=s===0||!de(a.createdAt,R[s-1].createdAt),u=`msg-${a.id}`,g=s===R.length-1;return e.jsxs("div",{className:"fade-in",children:[w&&e.jsxs("div",{className:"flex items-center gap-3 my-4",role:"separator",children:[e.jsx("div",{className:"flex-1 h-px",style:{background:"var(--color-border)"}}),e.jsx("span",{className:"text-label px-3 py-0.5 rounded-full border",style:{color:"var(--color-text-tertiary)",background:"var(--color-surface-alt)",borderColor:"var(--color-border)",fontSize:"var(--text-xs)"},children:y(j(a.createdAt),"dd 'de' MMMM",{locale:P})}),e.jsx("div",{className:"flex-1 h-px",style:{background:"var(--color-border)"}})]}),e.jsxs("div",{className:`flex items-end gap-2 ${t?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-white text-xs font-semibold flex-shrink-0",style:{background:a.senderRole==="GUARDIAN_1"?"var(--color-guardian-a)":"var(--color-guardian-b)"},"aria-hidden":"true",children:a.senderName.charAt(0)}),e.jsxs("div",{className:"max-w-[75%] group",children:[a.offensiveDetected&&e.jsxs("div",{className:`flex items-center gap-1.5 mb-1 text-xs font-semibold ${t?"flex-row-reverse":"flex-row"}`,style:{color:"var(--color-cancelado)"},children:[e.jsx(ve,{size:12,"aria-hidden":"true"}),e.jsx("span",{children:"Linguagem sinalizada automaticamente"})]}),e.jsx("div",{className:De("relative px-3 py-2",t?"bubble-sent":"bubble-received",a.isLegallyRelevant&&"bubble-relevant",a.offensiveDetected&&"bubble-offensive"),id:u,"aria-label":`Mensagem de ${a.senderName}`,style:a.offensiveDetected?{borderLeft:"3px solid var(--color-cancelado)"}:void 0,children:a.type==="AUDIO"?e.jsxs("div",{className:"flex items-center gap-2 py-1",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:t?"var(--color-primary)":"var(--color-border-dark)",color:"#fff"},"aria-hidden":"true",children:e.jsx(re,{size:16})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex gap-0.5",children:Array.from({length:18}).map((U,E)=>e.jsx("div",{className:"w-0.5 rounded-full",style:{height:`${6+Math.sin(E*.8)*6}px`,background:t?"var(--color-primary)":"var(--color-text-tertiary)",opacity:.7}},E))})}),e.jsxs("span",{className:"text-xs font-mono",style:{color:"var(--color-text-tertiary)"},children:[((C=a.content.match(/\d+/))==null?void 0:C[0])??"0","s"]})]}):e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap break-words",style:{color:t?"var(--color-primary)":"var(--color-text-primary)"},children:a.content})}),e.jsxs("div",{className:`flex items-center gap-2 mt-1 ${t?"flex-row-reverse":"flex-row"}`,children:[e.jsx("time",{dateTime:a.createdAt,className:"text-timestamp","aria-label":`Enviado às ${K(a.createdAt)}`,children:K(a.createdAt)}),t&&e.jsx("span",{style:{color:a.read?"#0ea5e9":"var(--color-text-disabled)"},"aria-label":a.read?"Lida":"Entregue",children:a.read?e.jsx(we,{size:13}):e.jsx(ge,{size:13})}),a.isLegallyRelevant&&e.jsxs("span",{className:"flex items-center gap-0.5 text-xs font-medium",style:{color:"var(--g-amber-600)"},"aria-label":"Juridicamente relevante",children:[e.jsx(Q,{size:11,fill:"currentColor","aria-hidden":"true"}),"Relevante"]}),a.isLegallyRelevant&&e.jsx(ye,{hash:`sha256:${a.id.slice(-8)}abcdef12`}),!x&&e.jsx("button",{onClick:()=>ne(a.id),className:"opacity-0 group-hover:opacity-100 transition-opacity p-0.5 rounded",style:{color:a.isLegallyRelevant?"var(--g-amber-600)":"var(--color-border-dark)"},"aria-label":a.isLegallyRelevant?"Remover marcação":"Marcar como relevante",children:e.jsx(Q,{size:13,fill:a.isLegallyRelevant?"currentColor":"none","aria-hidden":"true"})}),!t&&g&&!a.read&&e.jsx("span",{className:"text-xs",style:{color:"var(--color-pendente)"},"aria-label":"Aguardando resposta",children:e.jsx(Y,{size:11,"aria-hidden":"true"})})]})]})]})]},a.id)}),e.jsx("div",{ref:B})]}),!x&&e.jsxs("div",{className:"p-3 flex-shrink-0",style:{borderTop:"1px solid var(--color-border)"},children:[h&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 px-2",children:[e.jsx("span",{className:"pulse w-2 h-2 rounded-full flex-shrink-0",style:{background:"var(--color-cancelado)"}}),e.jsxs("span",{className:"text-xs font-semibold",style:{color:"var(--color-cancelado)"},children:["Gravando… ",Math.floor($/60).toString().padStart(2,"0"),":",($%60).toString().padStart(2,"0")]}),e.jsx("button",{onClick:J,className:"ml-auto text-xs font-semibold px-3 py-1 rounded-full",style:{background:"var(--color-cancelado-bg)",color:"var(--color-cancelado)"},children:"Parar e enviar"})]}),e.jsxs("form",{onSubmit:W,children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>p(!0),className:"btn-ghost p-0 w-10 h-10 rounded-lg flex-shrink-0","aria-label":"Anexar arquivo",children:e.jsx(se,{size:18,"aria-hidden":"true"})}),e.jsx("button",{type:"button",onClick:h?J:ie,className:"p-0 w-10 h-10 rounded-lg flex-shrink-0 flex items-center justify-center transition-all",style:{background:h?"var(--color-cancelado-bg)":"transparent",color:h?"var(--color-cancelado)":"var(--color-text-tertiary)",border:h?"1px solid var(--color-cancelado-border)":"none"},"aria-label":h?"Parar gravação":"Gravar áudio",children:e.jsx(re,{size:18,"aria-hidden":"true"})}),e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{ref:O,value:v,onChange:a=>{f(a.target.value),a.target.style.height="auto",a.target.style.height=Math.min(a.target.scrollHeight,120)+"px"},onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),W())},placeholder:"Escreva uma mensagem… (Enter para enviar)",className:"input-field resize-none",style:{minHeight:"40px",maxHeight:"120px"},rows:1,"aria-label":"Campo de mensagem","aria-multiline":"true"})}),e.jsx("button",{type:"submit",disabled:!v.trim(),className:"btn-primary flex-shrink-0 p-0",style:{width:"40px",height:"40px",minHeight:"unset",borderRadius:"0.5rem"},"aria-label":"Enviar mensagem",children:e.jsx(Ee,{size:16,"aria-hidden":"true"})})]}),e.jsxs("p",{className:"text-caption mt-1.5 px-1 flex items-center gap-1",role:"note",children:[e.jsx(I,{size:10,"aria-hidden":"true"}),"Esta mensagem será armazenada com registro imutável e valor jurídico."]})]})]}),x&&e.jsx("div",{className:"p-3 flex-shrink-0 text-center",style:{borderTop:"1px solid var(--color-border)",background:"rgba(124,58,237,0.03)"},children:e.jsxs("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:[e.jsx(ee,{size:12,className:"inline mr-1","aria-hidden":"true"}),"Modo somente leitura — visualização do profissional autorizado"]})})]}),z&&e.jsx(Le,{onClose:()=>A(!1),onExport:ce,childName:((X=M.find(a=>a.id===r))==null?void 0:X.fullName)??"",relevantCount:_,totalCount:k.length}),D&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 fade-in",style:{zIndex:"var(--z-modal)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(4px)"},role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden",style:{boxShadow:"0 24px 64px rgba(0,0,0,0.25)"},children:[e.jsxs("div",{className:"p-5 flex items-center justify-between",style:{background:"var(--foursys-gradient)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255,255,255,0.2)"},"aria-hidden":"true",children:e.jsx(se,{size:20,color:"#fff"})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Enviar Anexo"})]}),e.jsx("button",{onClick:()=>p(!1),className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:"rgba(255,255,255,0.2)",color:"#fff"},"aria-label":"Fechar",children:e.jsx(te,{size:16})})]}),e.jsxs("div",{className:"p-5 space-y-4",style:{background:"var(--color-surface)"},children:[e.jsxs("div",{className:"p-3 rounded-xl flex items-start gap-2",style:{background:"rgba(124,58,237,0.06)",border:"1px solid rgba(124,58,237,0.2)"},children:[e.jsx(I,{size:13,style:{color:"var(--color-primary)",flexShrink:0,marginTop:1}}),e.jsxs("p",{className:"text-xs",style:{color:"var(--color-text-secondary)"},children:["O arquivo será registrado com ",e.jsx("strong",{children:"timestamp imutável e hash SHA-256"}),", com valor jurídico."]})]}),e.jsx(je,{label:"Selecionar arquivo",accept:"image/*,application/pdf,.doc,.docx,.mp3,.ogg",hint:"Imagens, PDFs, documentos ou áudios · máx 20 MB"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"btn-secondary flex-1",children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn-gradient flex-1",onClick:()=>{p(!1),S("Arquivo enviado com registro de integridade!","success")},children:"Enviar"})]})]})]})})]})}function Le({onClose:r,onExport:i,childName:d,relevantCount:n,totalCount:v}){const[f,m]=o.useState("ALL"),[N,D]=o.useState(30),[p,z]=o.useState(!1),A=async()=>{z(!0),await new Promise(l=>setTimeout(l,600)),i(f,N)};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 fade-in",style:{zIndex:"var(--z-modal)",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(4px)"},role:"dialog","aria-modal":"true","aria-labelledby":"export-chat-title",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden",style:{boxShadow:"0 24px 64px rgba(0,0,0,0.25)"},children:[e.jsxs("div",{className:"p-5 flex items-center justify-between",style:{background:"linear-gradient(135deg, #0f172a, #1e293b)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255,255,255,0.1)"},"aria-hidden":"true",children:e.jsx(be,{size:20,style:{color:"#a78bfa"}})}),e.jsxs("div",{children:[e.jsx("h3",{id:"export-chat-title",className:"text-base font-bold text-white",children:"Exportar Chat"}),e.jsx("p",{className:"text-xs",style:{color:"rgba(255,255,255,0.5)"},children:d})]})]}),e.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:"rgba(255,255,255,0.1)",color:"#fff"},"aria-label":"Fechar",children:e.jsx(te,{size:16})})]}),e.jsxs("div",{className:"p-5 space-y-4",style:{background:"var(--color-surface)"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2.5 rounded-xl text-center",style:{background:"var(--color-surface-alt)"},children:[e.jsx("p",{className:"text-lg font-extrabold",style:{color:"var(--color-text-primary)"},children:v}),e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:"Total de mensagens"})]}),e.jsxs("div",{className:"p-2.5 rounded-xl text-center",style:{background:"rgba(245,158,11,0.08)"},children:[e.jsx("p",{className:"text-lg font-extrabold",style:{color:"var(--g-amber-600)"},children:n}),e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:"Juridicamente relevantes"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-text-secondary)"},children:"Período"}),e.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[7,30,90,365].map(l=>e.jsx("button",{onClick:()=>D(l),className:"py-1.5 rounded-xl text-xs font-semibold transition-all",style:{background:N===l?"var(--color-primary)":"var(--color-surface-alt)",color:N===l?"#fff":"var(--color-text-secondary)",border:N===l?"none":"1px solid var(--color-border)"},children:l===365?"1 ano":`${l}d`},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-text-secondary)"},children:"Mensagens a incluir"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[["ALL","Todas as mensagens",v],["RELEVANT","Apenas relevantes",n]].map(([l,T,h])=>e.jsxs("label",{className:"flex flex-col p-2.5 rounded-xl cursor-pointer transition-all",style:{background:f===l?"var(--color-primary-muted)":"var(--color-surface-alt)",border:`1.5px solid ${f===l?"var(--color-primary)":"var(--color-border)"}`},children:[e.jsx("input",{type:"radio",name:"filter",value:l,className:"sr-only",checked:f===l,onChange:()=>m(l)}),e.jsx("span",{className:"text-sm font-bold",style:{color:f===l?"var(--color-primary)":"var(--color-text-primary)"},children:T}),e.jsxs("span",{className:"text-xs mt-0.5",style:{color:"var(--color-text-tertiary)"},children:[h," msg"]})]},l))})]}),e.jsxs("div",{className:"p-3 rounded-xl flex items-start gap-2",style:{background:"rgba(29,78,216,0.06)",border:"1px solid rgba(29,78,216,0.15)"},children:[e.jsx(I,{size:13,style:{color:"var(--color-primary)",flexShrink:0,marginTop:1},"aria-hidden":"true"}),e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-secondary)"},children:"O arquivo exportado contém metadados de integridade e pode ser usado como evidência em processos jurídicos."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:r,className:"btn-secondary flex-1",children:"Cancelar"}),e.jsx("button",{onClick:A,disabled:p,className:"btn-gradient flex-1 flex items-center justify-center gap-2","aria-busy":p,children:p?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),"Gerando…"]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{size:14}),"Exportar"]})})]})]})]})})}function De(...r){return r.filter(Boolean).join(" ")}export{Pe as default};
